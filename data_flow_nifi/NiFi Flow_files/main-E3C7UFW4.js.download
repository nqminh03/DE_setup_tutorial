import{a as Mr,b as wc}from"./chunk-6TPHSQ3F.js";import{a as vc,b as Sc,c as Cc,d as _c}from"./chunk-FXU7XDDQ.js";import{a as xc}from"./chunk-VVC2AHBD.js";import{b as Ec,d as Tc}from"./chunk-EAI2RK6Y.js";import{k as bc}from"./chunk-ECWQT2PC.js";import{c as Tt,d as xt,f as Po,g as Fo,h as No,i as Hi,k as uc,m as Oo,n as mc,o as pc,p as Ro,q as Zt,r as Ho,s as dc,u as Lo,v as $o}from"./chunk-ZSGRQJXI.js";import{a as gc}from"./chunk-G6Q6OUVX.js";import{a as fc,b as hc}from"./chunk-MSG3AMHS.js";import{a as yc}from"./chunk-WMLXP5BW.js";import{a as Ut,b as rl,c as ol}from"./chunk-UZOBLZ75.js";import{a as So}from"./chunk-QSMGG3UV.js";import"./chunk-25PBKOLT.js";import{a as Sl}from"./chunk-H7I4OEHQ.js";import{A as on,B as Et,C as Ar,D as mi,E as sn,F as oc,G as sc,H as ac,I as Ni,J as Do,K as ko,L as an,M as Oi,N as Dr,O as ln,P as Mo,Q as lc,R as Ri,S as Io,T as kr,W as cc,d as Zl,e as Jl,f as Sr,i as ec,k as ic,m as de,n as nc,o as rc,p as Cr,q as _r,r as br,s as nn,t as wo,u as Er,v as Tr,w as rn,x as xr,y as wr,z as Ao}from"./chunk-LXJL254B.js";import{a as nr,b as en,c as To,d as rr,e as xo,f as or,g as sr}from"./chunk-GC45XIYD.js";import"./chunk-D6TPBSZA.js";import{c as Xl}from"./chunk-5VLGX52E.js";import{a as tc}from"./chunk-CYXQDLAV.js";import{a as Bl,b as Ul,f as zl}from"./chunk-MS2O3J7R.js";import{a as Jn,b as er,c as Vl,d as tr,e as jl,f as ir,g as Ji,h as Yl}from"./chunk-QFBNEJAF.js";import{a as Fi}from"./chunk-FAFJC74E.js";import{a as Kl,b as Gl,c as vr}from"./chunk-JSOHNL7Y.js";import{a as ar,b as lr,c as cr,d as ur,e as mr,f as pr,g as dr,h as fr,i as hr,j as gr,k as yr,l as tn}from"./chunk-IAJZ2FDF.js";import{a as Wl,b as Ql}from"./chunk-GRAICBD7.js";import"./chunk-SKY3SZS2.js";import"./chunk-GLGW4BH3.js";import{a as ql}from"./chunk-5VFR5VMA.js";import{a as Yt}from"./chunk-V6XJ5RHY.js";import{a as Hn}from"./chunk-NKVVEBL6.js";import{a as pl,b as dl}from"./chunk-32Z6JWY2.js";import{a as ge}from"./chunk-VOLK4WPL.js";import{a as bt}from"./chunk-P7BWIQ5D.js";import{a as wi,b as cl,f as ul,g as Ai,h as Di,j as On,k as Rn}from"./chunk-37NVEBTJ.js";import{a as fl,b as hl,c as gl,d as yl,g as vl}from"./chunk-VQJ2D6BU.js";import{a as li}from"./chunk-DXV5BSBK.js";import{a as O,b as ve,c as F,d as ml}from"./chunk-TSNUUCNV.js";import{a as xe}from"./chunk-L2BVLBVW.js";import{a as zt,b as Te,c as si,d as Ei,f as Ba}from"./chunk-5EWBRIJJ.js";import{a as Ln,b as Cl}from"./chunk-VGP2Y55F.js";import{a as Xn,b as Zn,c as Ll,d as $l}from"./chunk-UHYPQARX.js";import{a as Ii,b as Wi,c as Bn,d as Un,e as Eo,f as Pi,g as Qi,h as wl,i as zn,j as Kn,k as Gn,l as Il,m as Rl,n as Hl}from"./chunk-LBABXP7F.js";import{a as ci,b as $n,c as Tl,d as Ki,e as Mi,f as bo,g as Gi,h as xl,i as Vn,j as jn,k as kl,l as Ml}from"./chunk-AOTID2CE.js";import{a as qn,b as Dl,c as Pl,d as Wn,e as Yi,f as Qn,g as ui,h as Xi,i as Fl,j as Nl,k as Yn,l as Ol,o as Zi}from"./chunk-QYHZV4BR.js";import{a as Al}from"./chunk-UEF4WCDH.js";import{a as _l,b as bl,c as El}from"./chunk-VXIT4XR5.js";import{a as Ua,b as Ti,c as za}from"./chunk-N3CINOIB.js";import{b as ki,c as Pe,d as qe,e as Ke,f as Ge,g as We,h as _t}from"./chunk-UJ5JPNXD.js";import{A as Fn,C as al,F as ft,G as ht,I as ai,K as gt,N as yt,P as vt,S as St,U as rt,b as qt,c as Kt,f as Wa,g as $e,h as Qa,l as Ya,m as Xa,n as Za,o as Ja,p as el,t as In,u as Gt,v as Pn,x as qi,y as ye,z as sl}from"./chunk-YCKORLUP.js";import{Da as ie,Ea as Ct,H as qa,Ha as ll,Ia as Co,O as Ka,Oa as xi,P as Ga,Pa as _o,Qa as Nn,Ra as Ve,Sa as Wt,Ta as Qt,aa as tl,oa as il,ya as nl}from"./chunk-NZDVBRPA.js";import{a as yo,b as An,c as La,d as Dn,e as $a,f as kn,g as Va,h as vo}from"./chunk-DE4GBRGR.js";import{a as ja,b as Mn}from"./chunk-3D3VJHSK.js";import{$ as me,$a as K,$b as fa,$c as Na,A as uo,Ac as Ea,B as _n,Bb as aa,Bc as Ta,C as fe,Ca as Zs,Cb as la,Cc as Tn,Da as Si,Db as ca,Eb as Ui,F as z,Fa as tt,Fb as C,Fc as xa,G as Bs,Gb as Ce,Gc as wa,H as ni,Hb as te,Hc as Aa,I as Oe,Ib as Ci,Ja as mo,Jb as ri,Kb as ua,Kc as Da,L as Us,Lb as ma,Lc as ka,Mb as pa,Mc as Ma,Nb as da,Nc as _i,Ob as Me,P as zs,Pa as b,Qa as ee,Qb as oi,Qc as fo,Rc as ze,S as qs,Sc as Ia,T as Ks,Ta as Js,Tc as bi,Ub as Re,Uc as zi,V as Gs,Va as ea,Vb as He,Vc as ho,Wa as ta,Wb as po,Wc as xn,Xa as ia,Xc as Pa,Y as P,Z as Fe,Za as it,_c as Fa,ab as bn,ad as go,b as lo,ba as Ws,bd as Oa,ca as re,cb as q,cd as Ra,d as co,da as Qs,db as na,dd as ne,ea as U,eb as pt,f as Hs,fa as Rt,ga as Bi,gd as Dt,h as Nt,ha as T,hb as W,hc as ha,hd as wn,i as Ls,ia as Se,ib as Lt,jb as $t,k as $s,kb as Vt,kd as Ha,l as Vs,lb as v,ld as B,m as Q,mb as g,mc as ga,md as Ee,n as M,nb as X,nc as ya,oa as Ae,ob as jt,oc as dt,p as js,pa as Ht,pb as Bt,q as I,qb as ra,qc as nt,r as vi,rb as De,sa as Ys,sc as va,ub as oe,uc as En,va as le,vc as Le,wa as ce,wb as L,wc as Sa,xb as oa,xc as Ca,yb as sa,yc as _a,z as Ot,za as Xs,zc as ba}from"./chunk-M2KBZIUQ.js";import{a as Xt}from"./chunk-TJ5BXAFA.js";import{a as k,b as N,c as Rs,d as Pt,e as Ft}from"./chunk-CWTPBX7D.js";var Hm=Pt((Om,Rm)=>{"use strict";(function(n){typeof Om=="object"&&typeof Rm=="object"?n(Xt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){var e=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),t=n.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function r(c){return c&&c.bracketRegex||/[(){}[\]]/}function o(c,f,S){var x=c.getLineHandle(f.line),h=f.ch-1,p=S&&S.afterCursor;p==null&&(p=/(^| )cm-fat-cursor($| )/.test(c.getWrapperElement().className));var m=r(S),d=!p&&h>=0&&m.test(x.text.charAt(h))&&i[x.text.charAt(h)]||m.test(x.text.charAt(h+1))&&i[x.text.charAt(++h)];if(!d)return null;var y=d.charAt(1)==">"?1:-1;if(S&&S.strict&&y>0!=(h==f.ch))return null;var _=c.getTokenTypeAt(t(f.line,h+1)),E=s(c,t(f.line,h+(y>0?1:0)),y,_,S);return E==null?null:{from:t(f.line,h),to:E&&E.pos,match:E&&E.ch==d.charAt(0),forward:y>0}}function s(c,f,S,x,h){for(var p=h&&h.maxScanLineLength||1e4,m=h&&h.maxScanLines||1e3,d=[],y=r(h),_=S>0?Math.min(f.line+m,c.lastLine()+1):Math.max(c.firstLine()-1,f.line-m),E=f.line;E!=_;E+=S){var w=c.getLine(E);if(w){var A=S>0?0:w.length-1,R=S>0?w.length:-1;if(!(w.length>p))for(E==f.line&&(A=f.ch-(S<0?1:0));A!=R;A+=S){var j=w.charAt(A);if(y.test(j)&&(x===void 0||(c.getTokenTypeAt(t(E,A+1))||"")==(x||""))){var G=i[j];if(G&&G.charAt(1)==">"==S>0)d.push(j);else if(d.length)d.pop();else return{pos:t(E,A),ch:j}}}}}return E-S==(S>0?c.lastLine():c.firstLine())?!1:null}function a(c,f,S){for(var x=c.state.matchBrackets.maxHighlightLineLength||1e3,h=S&&S.highlightNonMatching,p=[],m=c.listSelections(),d=0;d<m.length;d++){var y=m[d].empty()&&o(c,m[d].head,S);if(y&&(y.match||h!==!1)&&c.getLine(y.from.line).length<=x){var _=y.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";p.push(c.markText(y.from,t(y.from.line,y.from.ch+1),{className:_})),y.to&&c.getLine(y.to.line).length<=x&&p.push(c.markText(y.to,t(y.to.line,y.to.ch+1),{className:_}))}}if(p.length){e&&c.state.focused&&c.focus();var E=function(){c.operation(function(){for(var w=0;w<p.length;w++)p[w].clear()})};if(f)setTimeout(E,800);else return E}}function l(c){c.operation(function(){c.state.matchBrackets.currentlyHighlighted&&(c.state.matchBrackets.currentlyHighlighted(),c.state.matchBrackets.currentlyHighlighted=null),c.state.matchBrackets.currentlyHighlighted=a(c,!1,c.state.matchBrackets)})}function u(c){c.state.matchBrackets&&c.state.matchBrackets.currentlyHighlighted&&(c.state.matchBrackets.currentlyHighlighted(),c.state.matchBrackets.currentlyHighlighted=null)}n.defineOption("matchBrackets",!1,function(c,f,S){S&&S!=n.Init&&(c.off("cursorActivity",l),c.off("focus",l),c.off("blur",u),u(c)),f&&(c.state.matchBrackets=typeof f=="object"?f:{},c.on("cursorActivity",l),c.on("focus",l),c.on("blur",u))}),n.defineExtension("matchBrackets",function(){a(this,!0)}),n.defineExtension("findMatchingBracket",function(c,f,S){return(S||typeof f=="boolean")&&(S?(S.strict=f,f=S):f=f?{strict:!0}:null),o(this,c,f)}),n.defineExtension("scanForBracket",function(c,f,S,x){return s(this,c,f,S,x)})})});var Vm=Pt((Lm,$m)=>{"use strict";(function(n){typeof Lm=="object"&&typeof $m=="object"?n(Xt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function e(t){return function(i,r){var o=r.line,s=i.getLine(o);function a(x){for(var h,p=r.ch,m=0;;){var d=p<=0?-1:s.lastIndexOf(x[0],p-1);if(d==-1){if(m==1)break;m=1,p=s.length;continue}if(m==1&&d<r.ch)break;if(h=i.getTokenTypeAt(n.Pos(o,d+1)),!/^(comment|string)/.test(h))return{ch:d+1,tokenType:h,pair:x};p=d-1}}function l(x){var h=1,p=i.lastLine(),m,d=x.ch,y;e:for(var _=o;_<=p;++_)for(var E=i.getLine(_),w=_==o?d:0;;){var A=E.indexOf(x.pair[0],w),R=E.indexOf(x.pair[1],w);if(A<0&&(A=E.length),R<0&&(R=E.length),w=Math.min(A,R),w==E.length)break;if(i.getTokenTypeAt(n.Pos(_,w+1))==x.tokenType){if(w==A)++h;else if(!--h){m=_,y=w;break e}}++w}return m==null||o==m?null:{from:n.Pos(o,d),to:n.Pos(m,y)}}for(var u=[],c=0;c<t.length;c++){var f=a(t[c]);f&&u.push(f)}u.sort(function(x,h){return x.ch-h.ch});for(var c=0;c<u.length;c++){var S=l(u[c]);if(S)return S}return null}}n.registerHelper("fold","brace",e([["{","}"],["[","]"]])),n.registerHelper("fold","brace-paren",e([["{","}"],["[","]"],["(",")"]])),n.registerHelper("fold","import",function(t,i){function r(c){if(c<t.firstLine()||c>t.lastLine())return null;var f=t.getTokenAt(n.Pos(c,1));if(/\S/.test(f.string)||(f=t.getTokenAt(n.Pos(c,f.end+1))),f.type!="keyword"||f.string!="import")return null;for(var S=c,x=Math.min(t.lastLine(),c+10);S<=x;++S){var h=t.getLine(S),p=h.indexOf(";");if(p!=-1)return{startCh:f.end,end:n.Pos(S,p)}}}var o=i.line,s=r(o),a;if(!s||r(o-1)||(a=r(o-2))&&a.end.line==o-1)return null;for(var l=s.end;;){var u=r(l.line+1);if(u==null)break;l=u.end}return{from:t.clipPos(n.Pos(o,s.startCh+1)),to:l}}),n.registerHelper("fold","include",function(t,i){function r(u){if(u<t.firstLine()||u>t.lastLine())return null;var c=t.getTokenAt(n.Pos(u,1));if(/\S/.test(c.string)||(c=t.getTokenAt(n.Pos(u,c.end+1))),c.type=="meta"&&c.string.slice(0,8)=="#include")return c.start+8}var o=i.line,s=r(o);if(s==null||r(o-1)!=null)return null;for(var a=o;;){var l=r(a+1);if(l==null)break;++a}return{from:n.Pos(o,s+1),to:t.clipPos(n.Pos(a))}})})});var Um=Pt((jm,Bm)=>{"use strict";(function(n){typeof jm=="object"&&typeof Bm=="object"?n(Xt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(e,t){var i=e.getModeAt(t),r=i.blockCommentStart,o=i.blockCommentEnd;if(!(!r||!o)){for(var s=t.line,a=e.getLine(s),l,u=t.ch,c=0;;){var f=u<=0?-1:a.lastIndexOf(r,u-1);if(f==-1){if(c==1)return;c=1,u=a.length;continue}if(c==1&&f<t.ch)return;if(/comment/.test(e.getTokenTypeAt(n.Pos(s,f+1)))&&(f==0||a.slice(f-o.length,f)==o||!/comment/.test(e.getTokenTypeAt(n.Pos(s,f))))){l=f+r.length;break}u=f-1}var S=1,x=e.lastLine(),h,p;e:for(var m=s;m<=x;++m)for(var d=e.getLine(m),y=m==s?l:0;;){var _=d.indexOf(r,y),E=d.indexOf(o,y);if(_<0&&(_=d.length),E<0&&(E=d.length),y=Math.min(_,E),y==d.length)break;if(y==_)++S;else if(!--S){h=m,p=y;break e}++y}if(!(h==null||s==h&&p==l))return{from:n.Pos(s,l),to:n.Pos(h,p)}}})})});var Os=Pt((zm,qm)=>{"use strict";(function(n){typeof zm=="object"&&typeof qm=="object"?n(Xt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function e(o,s,a,l){if(a&&a.call){var u=a;a=null}else var u=r(o,a,"rangeFinder");typeof s=="number"&&(s=n.Pos(s,0));var c=r(o,a,"minFoldSize");function f(p){var m=u(o,s);if(!m||m.to.line-m.from.line<c)return null;if(l==="fold")return m;for(var d=o.findMarksAt(m.from),y=0;y<d.length;++y)if(d[y].__isFold){if(!p)return null;m.cleared=!0,d[y].clear()}return m}var S=f(!0);if(r(o,a,"scanUp"))for(;!S&&s.line>o.firstLine();)s=n.Pos(s.line-1,0),S=f(!1);if(!(!S||S.cleared||l==="unfold")){var x=t(o,a,S);n.on(x,"mousedown",function(p){h.clear(),n.e_preventDefault(p)});var h=o.markText(S.from,S.to,{replacedWith:x,clearOnEnter:r(o,a,"clearOnEnter"),__isFold:!0});h.on("clear",function(p,m){n.signal(o,"unfold",o,p,m)}),n.signal(o,"fold",o,S.from,S.to)}}function t(o,s,a){var l=r(o,s,"widget");if(typeof l=="function"&&(l=l(a.from,a.to)),typeof l=="string"){var u=document.createTextNode(l);l=document.createElement("span"),l.appendChild(u),l.className="CodeMirror-foldmarker"}else l&&(l=l.cloneNode(!0));return l}n.newFoldFunction=function(o,s){return function(a,l){e(a,l,{rangeFinder:o,widget:s})}},n.defineExtension("foldCode",function(o,s,a){e(this,o,s,a)}),n.defineExtension("isFolded",function(o){for(var s=this.findMarksAt(o),a=0;a<s.length;++a)if(s[a].__isFold)return!0}),n.commands.toggleFold=function(o){o.foldCode(o.getCursor())},n.commands.fold=function(o){o.foldCode(o.getCursor(),null,"fold")},n.commands.unfold=function(o){o.foldCode(o.getCursor(),{scanUp:!1},"unfold")},n.commands.foldAll=function(o){o.operation(function(){for(var s=o.firstLine(),a=o.lastLine();s<=a;s++)o.foldCode(n.Pos(s,0),{scanUp:!1},"fold")})},n.commands.unfoldAll=function(o){o.operation(function(){for(var s=o.firstLine(),a=o.lastLine();s<=a;s++)o.foldCode(n.Pos(s,0),{scanUp:!1},"unfold")})},n.registerHelper("fold","combine",function(){var o=Array.prototype.slice.call(arguments,0);return function(s,a){for(var l=0;l<o.length;++l){var u=o[l](s,a);if(u)return u}}}),n.registerHelper("fold","auto",function(o,s){for(var a=o.getHelpers(s,"fold"),l=0;l<a.length;l++){var u=a[l](o,s);if(u)return u}});var i={rangeFinder:n.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};n.defineOption("foldOptions",null);function r(o,s,a){if(s&&s[a]!==void 0)return s[a];var l=o.options.foldOptions;return l&&l[a]!==void 0?l[a]:i[a]}n.defineExtension("foldOption",function(o,s){return r(this,o,s)})})});var Wm=Pt((Km,Gm)=>{"use strict";(function(n){typeof Km=="object"&&typeof Gm=="object"?n(Xt(),Os()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","./foldcode"],n):n(CodeMirror)})(function(n){"use strict";n.defineOption("foldGutter",!1,function(h,p,m){m&&m!=n.Init&&(h.clearGutter(h.state.foldGutter.options.gutter),h.state.foldGutter=null,h.off("gutterClick",u),h.off("changes",f),h.off("viewportChange",S),h.off("fold",x),h.off("unfold",x),h.off("swapDoc",f),h.off("optionChange",c)),p&&(h.state.foldGutter=new t(i(p)),l(h),h.on("gutterClick",u),h.on("changes",f),h.on("viewportChange",S),h.on("fold",x),h.on("unfold",x),h.on("swapDoc",f),h.on("optionChange",c))});var e=n.Pos;function t(h){this.options=h,this.from=this.to=0}function i(h){return h===!0&&(h={}),h.gutter==null&&(h.gutter="CodeMirror-foldgutter"),h.indicatorOpen==null&&(h.indicatorOpen="CodeMirror-foldgutter-open"),h.indicatorFolded==null&&(h.indicatorFolded="CodeMirror-foldgutter-folded"),h}function r(h,p){for(var m=h.findMarks(e(p,0),e(p+1,0)),d=0;d<m.length;++d)if(m[d].__isFold){var y=m[d].find(-1);if(y&&y.line===p)return m[d]}}function o(h){if(typeof h=="string"){var p=document.createElement("div");return p.className=h+" CodeMirror-guttermarker-subtle",p}else return h.cloneNode(!0)}function s(h,p,m){var d=h.state.foldGutter.options,y=p-1,_=h.foldOption(d,"minFoldSize"),E=h.foldOption(d,"rangeFinder"),w=typeof d.indicatorFolded=="string"&&a(d.indicatorFolded),A=typeof d.indicatorOpen=="string"&&a(d.indicatorOpen);h.eachLine(p,m,function(R){++y;var j=null,G=R.gutterMarkers;if(G&&(G=G[d.gutter]),r(h,y)){if(w&&G&&w.test(G.className))return;j=o(d.indicatorFolded)}else{var pe=e(y,0),je=E&&E(h,pe);if(je&&je.to.line-je.from.line>=_){if(A&&G&&A.test(G.className))return;j=o(d.indicatorOpen)}}!j&&!G||h.setGutterMarker(R,d.gutter,j)})}function a(h){return new RegExp("(^|\\s)"+h+"(?:$|\\s)\\s*")}function l(h){var p=h.getViewport(),m=h.state.foldGutter;m&&(h.operation(function(){s(h,p.from,p.to)}),m.from=p.from,m.to=p.to)}function u(h,p,m){var d=h.state.foldGutter;if(d){var y=d.options;if(m==y.gutter){var _=r(h,p);_?_.clear():h.foldCode(e(p,0),y)}}}function c(h,p){p=="mode"&&f(h)}function f(h){var p=h.state.foldGutter;if(p){var m=p.options;p.from=p.to=0,clearTimeout(p.changeUpdate),p.changeUpdate=setTimeout(function(){l(h)},m.foldOnChangeTimeSpan||600)}}function S(h){var p=h.state.foldGutter;if(p){var m=p.options;clearTimeout(p.changeUpdate),p.changeUpdate=setTimeout(function(){var d=h.getViewport();p.from==p.to||d.from-p.to>20||p.from-d.to>20?l(h):h.operation(function(){d.from<p.from&&(s(h,d.from,p.from),p.from=d.from),d.to>p.to&&(s(h,p.to,d.to),p.to=d.to)})},m.updateViewportTimeSpan||400)}}function x(h,p){var m=h.state.foldGutter;if(m){var d=p.line;d>=m.from&&d<m.to&&s(h,d,d+1)}}})});var Xm=Pt((Qm,Ym)=>{"use strict";(function(n){typeof Qm=="object"&&typeof Ym=="object"?n(Xt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.registerHelper("fold","markdown",function(e,t){var i=100;function r(S){var x=e.getTokenTypeAt(n.Pos(S,0));return x&&/\bheader\b/.test(x)}function o(S,x,h){var p=x&&x.match(/^#+/);return p&&r(S)?p[0].length:(p=h&&h.match(/^[=\-]+\s*$/),p&&r(S+1)?h[0]=="="?1:2:i)}var s=e.getLine(t.line),a=e.getLine(t.line+1),l=o(t.line,s,a);if(l!==i){for(var u=e.lastLine(),c=t.line,f=e.getLine(c+2);c<u&&!(o(c+1,a,f)<=l);)++c,a=f,f=e.getLine(c+2);return{from:n.Pos(t.line,s.length),to:n.Pos(c,e.getLine(c).length)}}})})});var ep=Pt((Zm,Jm)=>{"use strict";(function(n){typeof Zm=="object"&&typeof Jm=="object"?n(Xt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";var e=n.Pos;function t(m,d){return m.line-d.line||m.ch-d.ch}var i="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=i+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",o=new RegExp("<(/?)(["+i+"]["+r+"]*)","g");function s(m,d,y,_){this.line=d,this.ch=y,this.cm=m,this.text=m.getLine(d),this.min=_?Math.max(_.from,m.firstLine()):m.firstLine(),this.max=_?Math.min(_.to-1,m.lastLine()):m.lastLine()}function a(m,d){var y=m.cm.getTokenTypeAt(e(m.line,d));return y&&/\btag\b/.test(y)}function l(m){if(!(m.line>=m.max))return m.ch=0,m.text=m.cm.getLine(++m.line),!0}function u(m){if(!(m.line<=m.min))return m.text=m.cm.getLine(--m.line),m.ch=m.text.length,!0}function c(m){for(;;){var d=m.text.indexOf(">",m.ch);if(d==-1){if(l(m))continue;return}if(!a(m,d+1)){m.ch=d+1;continue}var y=m.text.lastIndexOf("/",d),_=y>-1&&!/\S/.test(m.text.slice(y+1,d));return m.ch=d+1,_?"selfClose":"regular"}}function f(m){for(;;){var d=m.ch?m.text.lastIndexOf("<",m.ch-1):-1;if(d==-1){if(u(m))continue;return}if(!a(m,d+1)){m.ch=d;continue}o.lastIndex=d,m.ch=d;var y=o.exec(m.text);if(y&&y.index==d)return y}}function S(m){for(;;){o.lastIndex=m.ch;var d=o.exec(m.text);if(!d){if(l(m))continue;return}if(!a(m,d.index+1)){m.ch=d.index+1;continue}return m.ch=d.index+d[0].length,d}}function x(m){for(;;){var d=m.ch?m.text.lastIndexOf(">",m.ch-1):-1;if(d==-1){if(u(m))continue;return}if(!a(m,d+1)){m.ch=d;continue}var y=m.text.lastIndexOf("/",d),_=y>-1&&!/\S/.test(m.text.slice(y+1,d));return m.ch=d+1,_?"selfClose":"regular"}}function h(m,d){for(var y=[];;){var _=S(m),E,w=m.line,A=m.ch-(_?_[0].length:0);if(!_||!(E=c(m)))return;if(E!="selfClose")if(_[1]){for(var R=y.length-1;R>=0;--R)if(y[R]==_[2]){y.length=R;break}if(R<0&&(!d||d==_[2]))return{tag:_[2],from:e(w,A),to:e(m.line,m.ch)}}else y.push(_[2])}}function p(m,d){for(var y=[];;){var _=x(m);if(!_)return;if(_=="selfClose"){f(m);continue}var E=m.line,w=m.ch,A=f(m);if(!A)return;if(A[1])y.push(A[2]);else{for(var R=y.length-1;R>=0;--R)if(y[R]==A[2]){y.length=R;break}if(R<0&&(!d||d==A[2]))return{tag:A[2],from:e(m.line,m.ch),to:e(E,w)}}}}n.registerHelper("fold","xml",function(m,d){for(var y=new s(m,d.line,0);;){var _=S(y);if(!_||y.line!=d.line)return;var E=c(y);if(!E)return;if(!_[1]&&E!="selfClose"){var w=e(y.line,y.ch),A=h(y,_[2]);return A&&t(A.from,w)>0?{from:w,to:A.from}:null}}}),n.findMatchingTag=function(m,d,y){var _=new s(m,d.line,d.ch,y);if(!(_.text.indexOf(">")==-1&&_.text.indexOf("<")==-1)){var E=c(_),w=E&&e(_.line,_.ch),A=E&&f(_);if(!(!E||!A||t(_,d)>0)){var R={from:e(_.line,_.ch),to:w,tag:A[2]};return E=="selfClose"?{open:R,close:null,at:"open"}:A[1]?{open:p(_,A[2]),close:R,at:"close"}:(_=new s(m,w.line,w.ch,y),{open:R,close:h(_,A[2]),at:"open"})}}},n.findEnclosingTag=function(m,d,y,_){for(var E=new s(m,d.line,d.ch,y);;){var w=p(E,_);if(!w)break;var A=new s(m,d.line,d.ch,y),R=h(A,w.tag);if(R)return{open:w,close:R}}},n.scanForClosingTag=function(m,d,y,_){var E=new s(m,d.line,d.ch,_?{from:0,to:_}:null);return h(E,y)}})});var np=Pt((tp,ip)=>{"use strict";(function(n){typeof tp=="object"&&typeof ip=="object"?n(Xt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";var e="CodeMirror-hint",t="CodeMirror-hint-active";n.showHint=function(p,m,d){if(!m)return p.showHint(d);d&&d.async&&(m.async=!0);var y={hint:m};if(d)for(var _ in d)y[_]=d[_];return p.showHint(y)},n.defineExtension("showHint",function(p){p=s(this,this.getCursor("start"),p);var m=this.listSelections();if(!(m.length>1)){if(this.somethingSelected()){if(!p.hint.supportsSelection)return;for(var d=0;d<m.length;d++)if(m[d].head.line!=m[d].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var y=this.state.completionActive=new i(this,p);y.options.hint&&(n.signal(this,"startCompletion",this),y.update(!0))}}),n.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function i(p,m){if(this.cm=p,this.options=m,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var d=this;p.on("cursorActivity",this.activityFunc=function(){d.cursorActivity()})}}var r=window.requestAnimationFrame||function(p){return setTimeout(p,1e3/60)},o=window.cancelAnimationFrame||clearTimeout;i.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&n.signal(this.data,"close"),this.widget&&this.widget.close(),n.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(p,m){var d=p.list[m],y=this;this.cm.operation(function(){d.hint?d.hint(y.cm,p,d):y.cm.replaceRange(a(d),d.from||p.from,d.to||p.to,"complete"),n.signal(p,"pick",d),y.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(o(this.debounce),this.debounce=0);var p=this.startPos;this.data&&(p=this.data.from);var m=this.cm.getCursor(),d=this.cm.getLine(m.line);if(m.line!=this.startPos.line||d.length-m.ch!=this.startLen-this.startPos.ch||m.ch<p.ch||this.cm.somethingSelected()||!m.ch||this.options.closeCharacters.test(d.charAt(m.ch-1)))this.close();else{var y=this;this.debounce=r(function(){y.update()}),this.widget&&this.widget.disable()}},update:function(p){if(this.tick!=null){var m=this,d=++this.tick;S(this.options.hint,this.cm,this.options,function(y){m.tick==d&&m.finishUpdate(y,p)})}},finishUpdate:function(p,m){this.data&&n.signal(this.data,"update");var d=this.widget&&this.widget.picked||m&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=p,p&&p.list.length&&(d&&p.list.length==1?this.pick(p,0):(this.widget=new c(this,p),n.signal(p,"shown")))}};function s(p,m,d){var y=p.options.hintOptions,_={};for(var E in h)_[E]=h[E];if(y)for(var E in y)y[E]!==void 0&&(_[E]=y[E]);if(d)for(var E in d)d[E]!==void 0&&(_[E]=d[E]);return _.hint.resolve&&(_.hint=_.hint.resolve(p,m)),_}function a(p){return typeof p=="string"?p:p.text}function l(p,m){var d={Up:function(){m.moveFocus(-1)},Down:function(){m.moveFocus(1)},PageUp:function(){m.moveFocus(-m.menuSize()+1,!0)},PageDown:function(){m.moveFocus(m.menuSize()-1,!0)},Home:function(){m.setFocus(0)},End:function(){m.setFocus(m.length-1)},Enter:m.pick,Tab:m.pick,Esc:m.close},y=/Mac/.test(navigator.platform);y&&(d["Ctrl-P"]=function(){m.moveFocus(-1)},d["Ctrl-N"]=function(){m.moveFocus(1)});var _=p.options.customKeys,E=_?{}:d;function w(j,G){var pe;typeof G!="string"?pe=function(je){return G(je,m)}:d.hasOwnProperty(G)?pe=d[G]:pe=G,E[j]=pe}if(_)for(var A in _)_.hasOwnProperty(A)&&w(A,_[A]);var R=p.options.extraKeys;if(R)for(var A in R)R.hasOwnProperty(A)&&w(A,R[A]);return E}function u(p,m){for(;m&&m!=p;){if(m.nodeName.toUpperCase()==="LI"&&m.parentNode==p)return m;m=m.parentNode}}function c(p,m){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=p,this.data=m,this.picked=!1;var d=this,y=p.cm,_=y.getInputField().ownerDocument,E=_.defaultView||_.parentWindow,w=this.hints=_.createElement("ul");w.setAttribute("role","listbox"),w.setAttribute("aria-expanded","true"),w.id=this.id;var A=p.cm.options.theme;w.className="CodeMirror-hints "+A,this.selectedHint=m.selectedHint||0;for(var R=m.list,j=0;j<R.length;++j){var G=w.appendChild(_.createElement("li")),pe=R[j],je=e+(j!=this.selectedHint?"":" "+t);pe.className!=null&&(je=pe.className+" "+je),G.className=je,j==this.selectedHint&&G.setAttribute("aria-selected","true"),G.id=this.id+"-"+j,G.setAttribute("role","option"),pe.render?pe.render(G,m,pe):G.appendChild(_.createTextNode(pe.displayText||a(pe))),G.hintId=j}var we=p.options.container||_.body,Je=y.cursorCoords(p.options.alignWithWord?m.from:null),Ne=Je.left,Mt=Je.bottom,H=!0,V=0,$=0;if(we!==_.body){var J=["absolute","relative","fixed"].indexOf(E.getComputedStyle(we).position)!==-1,_e=J?we:we.offsetParent,Be=_e.getBoundingClientRect(),ke=_.body.getBoundingClientRect();V=Be.left-ke.left-_e.scrollLeft,$=Be.top-ke.top-_e.scrollTop}w.style.left=Ne-V+"px",w.style.top=Mt-$+"px";var Ie=E.innerWidth||Math.max(_.body.offsetWidth,_.documentElement.offsetWidth),se=E.innerHeight||Math.max(_.body.offsetHeight,_.documentElement.offsetHeight);we.appendChild(w),y.getInputField().setAttribute("aria-autocomplete","list"),y.getInputField().setAttribute("aria-owns",this.id),y.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var D=p.options.moveOnOverlap?w.getBoundingClientRect():new DOMRect,he=p.options.paddingForScrollbar?w.scrollHeight>w.clientHeight+1:!1,Y;setTimeout(function(){Y=y.getScrollInfo()});var be=D.bottom-se;if(be>0){var ue=D.bottom-D.top,ut=D.top-(Je.bottom-Je.top)-2;se-D.top<ut?(ue>ut&&(w.style.height=(ue=ut)+"px"),w.style.top=(Mt=Je.top-ue)+$+"px",H=!1):w.style.height=se-D.top-2+"px"}var mt=D.right-Ie;if(he&&(mt+=y.display.nativeBarWidth),mt>0&&(D.right-D.left>Ie&&(w.style.width=Ie-5+"px",mt-=D.right-D.left-Ie),w.style.left=(Ne=Math.max(Je.left-mt-V,0))+"px"),he)for(var et=w.firstChild;et;et=et.nextSibling)et.style.paddingRight=y.display.nativeBarWidth+"px";if(y.addKeyMap(this.keyMap=l(p,{moveFocus:function(Ue,ae){d.changeActive(d.selectedHint+Ue,ae)},setFocus:function(Ue){d.changeActive(Ue)},menuSize:function(){return d.screenAmount()},length:R.length,close:function(){p.close()},pick:function(){d.pick()},data:m})),p.options.closeOnUnfocus){var vn;y.on("blur",this.onBlur=function(){vn=setTimeout(function(){p.close()},100)}),y.on("focus",this.onFocus=function(){clearTimeout(vn)})}y.on("scroll",this.onScroll=function(){var Ue=y.getScrollInfo(),ae=y.getWrapperElement().getBoundingClientRect();Y||(Y=y.getScrollInfo());var Cn=Mt+Y.top-Ue.top,It=Cn-(E.pageYOffset||(_.documentElement||_.body).scrollTop);if(H||(It+=w.offsetHeight),It<=ae.top||It>=ae.bottom)return p.close();w.style.top=Cn+"px",w.style.left=Ne+Y.left-Ue.left+"px"}),n.on(w,"dblclick",function(Ue){var ae=u(w,Ue.target||Ue.srcElement);ae&&ae.hintId!=null&&(d.changeActive(ae.hintId),d.pick())}),n.on(w,"click",function(Ue){var ae=u(w,Ue.target||Ue.srcElement);ae&&ae.hintId!=null&&(d.changeActive(ae.hintId),p.options.completeOnSingleClick&&d.pick())}),n.on(w,"mousedown",function(){setTimeout(function(){y.focus()},20)});var Sn=this.getSelectedHintRange();return(Sn.from!==0||Sn.to!==0)&&this.scrollToActive(),n.signal(m,"select",R[this.selectedHint],w.childNodes[this.selectedHint]),!0}c.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var p=this.completion.cm.getInputField();p.removeAttribute("aria-activedescendant"),p.removeAttribute("aria-owns");var m=this.completion.cm;this.completion.options.closeOnUnfocus&&(m.off("blur",this.onBlur),m.off("focus",this.onFocus)),m.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var p=this;this.keyMap={Enter:function(){p.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(p,m){if(p>=this.data.list.length?p=m?this.data.list.length-1:0:p<0&&(p=m?0:this.data.list.length-1),this.selectedHint!=p){var d=this.hints.childNodes[this.selectedHint];d&&(d.className=d.className.replace(" "+t,""),d.removeAttribute("aria-selected")),d=this.hints.childNodes[this.selectedHint=p],d.className+=" "+t,d.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",d.id),this.scrollToActive(),n.signal(this.data,"select",this.data.list[this.selectedHint],d)}},scrollToActive:function(){var p=this.getSelectedHintRange(),m=this.hints.childNodes[p.from],d=this.hints.childNodes[p.to],y=this.hints.firstChild;m.offsetTop<this.hints.scrollTop?this.hints.scrollTop=m.offsetTop-y.offsetTop:d.offsetTop+d.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=d.offsetTop+d.offsetHeight-this.hints.clientHeight+y.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var p=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-p),to:Math.min(this.data.list.length-1,this.selectedHint+p)}}};function f(p,m){if(!p.somethingSelected())return m;for(var d=[],y=0;y<m.length;y++)m[y].supportsSelection&&d.push(m[y]);return d}function S(p,m,d,y){if(p.async)p(m,y,d);else{var _=p(m,d);_&&_.then?_.then(y):y(_)}}function x(p,m){var d=p.getHelpers(m,"hint"),y;if(d.length){var _=function(E,w,A){var R=f(E,d);function j(G){if(G==R.length)return w(null);S(R[G],E,A,function(pe){pe&&pe.list.length>0?w(pe):j(G+1)})}j(0)};return _.async=!0,_.supportsSelection=!0,_}else return(y=p.getHelper(p.getCursor(),"hintWords"))?function(E){return n.hint.fromList(E,{words:y})}:n.hint.anyword?function(E,w){return n.hint.anyword(E,w)}:function(){}}n.registerHelper("hint","auto",{resolve:x}),n.registerHelper("hint","fromList",function(p,m){var d=p.getCursor(),y=p.getTokenAt(d),_,E=n.Pos(d.line,y.start),w=d;y.start<d.ch&&/\w/.test(y.string.charAt(d.ch-y.start-1))?_=y.string.substr(0,d.ch-y.start):(_="",E=d);for(var A=[],R=0;R<m.words.length;R++){var j=m.words[R];j.slice(0,_.length)==_&&A.push(j)}if(A.length)return{list:A,from:E,to:w}}),n.commands.autocomplete=n.showHint;var h={hint:n.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};n.defineOption("hintOptions",null)})});var Ir=(()=>{let e=class e{constructor(i){this.httpClient=i}getUser(){return this.httpClient.get(`${e.API}/flow/current-user`)}};e.API="../nifi-api",e.\u0275fac=function(r){return new(r||e)(T(Le))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Pr=bi("[Login Configuration] Load Login Configuration"),Jt=bi("[Login Configuration] Load Login Configuration Success",zi());var Qe=()=>{let n=Se(Ut),e=Se(Ir),t=Se(ge),i=Se(ne);return i.select(Ti).pipe(Oe(1),P(o=>o?M(o):Q(n.getLoginConfiguration()).pipe(me(s=>{i.dispatch(Jt({response:{loginConfiguration:s.authenticationConfiguration}}))})))).pipe(P(o=>i.select(Mn).pipe(Oe(1),P(s=>s.status=="success"?M(!0):Q(e.getUser()).pipe(me(a=>{i.dispatch(An({response:{user:a}}))}),I(()=>!0),z(a=>((a.status!==401||o.loginSupported)&&i.dispatch(t.fullScreenError(a)),M(!1))))))),z(()=>(i.dispatch(zt({errorDetail:{title:"Unauthorized",message:"Unable to load authentication configuration. Please contact your system administrator."}})),M(!1))))};var Ac=n=>()=>{let e=Se(ne),t=Se(Ut),i=Se(ge);return e.select(Ti).pipe(P(r=>r?M(r):t.getLoginConfiguration().pipe(me(o=>e.dispatch(Jt({response:{loginConfiguration:o.authenticationConfiguration}}))))),I(r=>n(r)?!0:(e.dispatch(zt({skipReplaceUrl:!0,errorDetail:{title:"Unable to load",message:"Login configuration check failed"}})),!1)),z(r=>(e.dispatch(i.fullScreenError(r,!0)),M(!1))))};var sp=[{path:"login",canMatch:[Ac(n=>n.loginSupported)],loadChildren:()=>import("./chunk-IOUXWUAK.js").then(n=>n.LoginModule)},{path:"logout-complete",loadChildren:()=>import("./chunk-N6XS2GFW.js").then(n=>n.LogoutModule)},{path:"error",loadChildren:()=>import("./chunk-A35Y4ZJK.js").then(n=>n.ErrorModule)},{path:"404",component:So,loadChildren:()=>import("./chunk-YE3ICW45.js").then(n=>n.RouteNotFoundModule)},{path:"documentation",canMatch:[Qe],loadChildren:()=>import("./chunk-EB7OOLUC.js").then(n=>n.DocumentationModule)},{path:"settings",canMatch:[Qe],loadChildren:()=>import("./chunk-UJPRBAZ2.js").then(n=>n.SettingsModule)},{path:"provenance",canMatch:[Qe],loadChildren:()=>import("./chunk-JTOMT5N5.js").then(n=>n.ProvenanceModule)},{path:"parameter-contexts",canMatch:[Qe],loadChildren:()=>import("./chunk-PO4G2PBM.js").then(n=>n.ParameterContextsModule)},{path:"counters",canMatch:[Qe],loadChildren:()=>import("./chunk-7I2W4Q63.js").then(n=>n.CountersModule)},{path:"users",canMatch:[Qe],loadChildren:()=>import("./chunk-Q7KJPVB2.js").then(n=>n.UsersModule)},{path:"access-policies",canMatch:[Qe],loadChildren:()=>import("./chunk-DFSUJP3C.js").then(n=>n.AccessPoliciesModule)},{path:"summary",canMatch:[Qe],loadChildren:()=>import("./chunk-DDX64OZX.js").then(n=>n.SummaryModule)},{path:"bulletins",canMatch:[Qe],loadChildren:()=>import("./chunk-R5OTP6SH.js").then(n=>n.BulletinsModule)},{path:"queue",canMatch:[Qe],loadChildren:()=>import("./chunk-YPRJTKZ5.js").then(n=>n.QueueModule)},{path:"flow-configuration-history",canMatch:[Qe],loadChildren:()=>import("./chunk-KWSYUZIX.js").then(n=>n.FlowConfigurationHistoryModule)},{path:"cluster",canMatch:[Qe],loadChildren:()=>import("./chunk-LTNAHWDY.js").then(n=>n.ClusterModule)},{path:"",canMatch:[Qe],loadChildren:()=>import("./chunk-46RC2VVA.js").then(n=>n.FlowDesignerModule)},{path:"**",component:So,loadChildren:()=>import("./chunk-YE3ICW45.js").then(n=>n.RouteNotFoundModule)}],Dc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ht({type:e}),e.\u0275inj=Rt({imports:[fo.forRoot(sp,{paramsInheritanceStrategy:"always",useHash:!0}),fo]});let n=e;return n})();var Fr=bi("[Navigation] Push Back Navigation",zi()),Nr=bi("[Navigation] Pop Back Navigation",zi());function ap(n,e){n&1&&(v(0,"div",0)(1,"div",1),X(2,"mat-spinner",2),g()())}function lp(n,e){n&1&&X(0,"router-outlet")}var Mc=(()=>{let e=class e{constructor(i,r,o,s,a){this.router=i,this.storage=r,this.themingService=o,this.dialog=s,this.store=a,this.title="nifi",this.guardLoading=!0,this.router.events.pipe(ze(),me(c=>{c instanceof xa&&this.dialog.openDialogs.forEach(f=>f.close("ROUTED")),c instanceof Da&&(this.guardLoading=!0),(c instanceof ka||c instanceof Aa)&&(this.guardLoading=!1)}),fe(c=>c instanceof wa),I(c=>c),xe(()=>this.store.select(Hl))).subscribe(([c,f])=>{let S=this.router.getCurrentNavigation()?.extras;if(S?.state?.backNavigation){let x=S?.state?.backNavigation;this.store.dispatch(Fr({backNavigation:x}))}else f&&this.store.dispatch(Nr({url:c.url}))});let l=this.storage.getItem("theme"),u=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;this.themingService.toggleTheme(u,l),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addListener(c=>{l=this.storage.getItem("theme"),this.themingService.toggleTheme(c.matches,l)})}};e.\u0275fac=function(r){return new(r||e)(ee(_i),ee(Qa),ee(Ya),ee(Pe),ee(ne))},e.\u0275cmp=Ae({type:e,selectors:[["nifi"]],decls:2,vars:1,consts:[[1,"splash","h-screen","p-20"],[1,"splash-img","h-full","flex","items-center","justify-center"],["color","warn"]],template:function(r,o){r&1&&K(0,ap,3,0,"div",0)(1,lp,1,0),r&2&&W(0,o.guardLoading?0:1)},dependencies:[Ma,rl],styles:['.splash[_ngcontent-%COMP%]   .splash-img[_ngcontent-%COMP%]{background:transparent url("./media/nifi-drop-splash-XQG4BR47.svg") no-repeat center center}']});let n=e;return n})();function Ic(n){return new re(3e3,!1)}function cp(){return new re(3100,!1)}function up(){return new re(3101,!1)}function mp(n){return new re(3001,!1)}function pp(n){return new re(3003,!1)}function dp(n){return new re(3004,!1)}function fp(n,e){return new re(3005,!1)}function hp(){return new re(3006,!1)}function gp(){return new re(3007,!1)}function yp(n,e){return new re(3008,!1)}function vp(n){return new re(3002,!1)}function Sp(n,e,t,i,r){return new re(3010,!1)}function Cp(){return new re(3011,!1)}function _p(){return new re(3012,!1)}function bp(){return new re(3200,!1)}function Ep(){return new re(3202,!1)}function Tp(){return new re(3013,!1)}function xp(n){return new re(3014,!1)}function wp(n){return new re(3015,!1)}function Ap(n){return new re(3016,!1)}function Dp(n,e){return new re(3404,!1)}function kp(n){return new re(3502,!1)}function Mp(n){return new re(3503,!1)}function Ip(){return new re(3300,!1)}function Pp(n){return new re(3504,!1)}function Fp(n){return new re(3301,!1)}function Np(n,e){return new re(3302,!1)}function Op(n){return new re(3303,!1)}function Rp(n,e){return new re(3400,!1)}function Hp(n){return new re(3401,!1)}function Lp(n){return new re(3402,!1)}function $p(n,e){return new re(3505,!1)}function ti(n){switch(n.length){case 0:return new xi;case 1:return n[0];default:return new _o(n)}}function qc(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let u=l.get("offset"),c=u==s,f=c&&a||new Map;l.forEach((S,x)=>{let h=x,p=S;if(x!=="offset")switch(h=n.normalizePropertyName(h,r),p){case Nn:p=t.get(x);break;case Ct:p=i.get(x);break;default:p=n.normalizeStyleValue(x,h,p,r);break}f.set(h,p)}),c||o.push(f),a=f,s=u}),r.length)throw kp(r);return o}function ls(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Vo(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Vo(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Vo(t,"destroy",n)));break}}function Vo(n,e,t){let i=t.totalTime,r=!!t.disabled,o=cs(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function cs(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Ze(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function Pc(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var Vp=typeof document>"u"?null:document.documentElement;function us(n){let e=n.parentNode||n.host||null;return e===Vp?null:e}function jp(n){return n.substring(1,6)=="ebkit"}var di=null,Fc=!1;function Bp(n){di||(di=Up()||{},Fc=di.style?"WebkitAppearance"in di.style:!1);let e=!0;return di.style&&!jp(n)&&(e=n in di.style,!e&&Fc&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in di.style)),e}function Up(){return typeof document<"u"?document.body:null}function Kc(n,e){for(;e;){if(e===n)return!0;e=us(e)}return!1}function Gc(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var ms=(()=>{let e=class e{validateStyleProperty(i){return Bp(i)}matchesElement(i,r){return!1}containsElement(i,r){return Kc(i,r)}getParentElement(i){return us(i)}query(i,r,o){return Gc(i,r,o)}computeStyle(i,r,o){return o||""}animate(i,r,o,s,a,l=[],u){return new xi(o,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})(),hs=class hs{};hs.NOOP=new ms;var gi=hs,yi=class{};var zp=1e3,Wc="{{",qp="}}",Qc="ng-enter",Ko="ng-leave",Or="ng-trigger",Vr=".ng-trigger",Nc="ng-animating",Go=".ng-animating";function kt(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Wo(parseFloat(e[1]),e[2])}function Wo(n,e){switch(e){case"s":return n*zp;default:return n}}function jr(n,e,t){return n.hasOwnProperty("duration")?n:Kp(n,e,t)}function Kp(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(Ic(n)),{duration:0,delay:0,easing:""};r=Wo(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=Wo(parseFloat(l),a[4]));let u=a[5];u&&(s=u)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(cp()),a=!0),o<0&&(e.push(up()),a=!0),a&&e.splice(l,0,Ic(n))}return{duration:r,delay:o,easing:s}}function Gp(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function wt(n,e,t){e.forEach((i,r)=>{let o=ps(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function hi(n,e){e.forEach((t,i)=>{let r=ps(i);n.style[r]=""})}function cn(n){return Array.isArray(n)?n.length==1?n[0]:ll(n):n}function Wp(n,e,t){let i=e.params||{},r=Yc(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(mp(o))})}var Qo=new RegExp(`${Wc}\\s*(.+?)\\s*${qp}`,"g");function Yc(n){let e=[];if(typeof n=="string"){let t;for(;t=Qo.exec(n);)e.push(t[1]);Qo.lastIndex=0}return e}function mn(n,e,t){let i=`${n}`,r=i.replace(Qo,(o,s)=>{let a=e[s];return a==null&&(t.push(pp(s)),a=""),a.toString()});return r==i?n:r}var Qp=/-+([a-z0-9])/g;function ps(n){return n.replace(Qp,(...e)=>e[1].toUpperCase())}function Yp(n,e){return n===0||e===0}function Xp(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,ds(n,a)))}}return e}function Xe(n,e,t){switch(e.type){case ie.Trigger:return n.visitTrigger(e,t);case ie.State:return n.visitState(e,t);case ie.Transition:return n.visitTransition(e,t);case ie.Sequence:return n.visitSequence(e,t);case ie.Group:return n.visitGroup(e,t);case ie.Animate:return n.visitAnimate(e,t);case ie.Keyframes:return n.visitKeyframes(e,t);case ie.Style:return n.visitStyle(e,t);case ie.Reference:return n.visitReference(e,t);case ie.AnimateChild:return n.visitAnimateChild(e,t);case ie.AnimateRef:return n.visitAnimateRef(e,t);case ie.Query:return n.visitQuery(e,t);case ie.Stagger:return n.visitStagger(e,t);default:throw dp(e.type)}}function ds(n,e){return window.getComputedStyle(n)[e]}var Zp=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Br=class extends yi{normalizePropertyName(e,t){return ps(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(Zp.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(fp(e,i))}return s+o}};var Ur="*";function Jp(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>ed(i,t,e)):t.push(n),t}function ed(n,e,t){if(n[0]==":"){let l=td(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(wp(n)),e;let r=i[1],o=i[2],s=i[3];e.push(Oc(r,s));let a=r==Ur&&s==Ur;o[0]=="<"&&!a&&e.push(Oc(s,r))}function td(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(Ap(n)),"* => *"}}var Rr=new Set(["true","1"]),Hr=new Set(["false","0"]);function Oc(n,e){let t=Rr.has(n)||Hr.has(n),i=Rr.has(e)||Hr.has(e);return(r,o)=>{let s=n==Ur||n==r,a=e==Ur||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?Rr.has(n):Hr.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?Rr.has(e):Hr.has(e)),s&&a}}var Xc=":self",id=new RegExp(`s*${Xc}s*,?`,"g");function Zc(n,e,t,i){return new Yo(n).build(e,t,i)}var Rc="",Yo=class{constructor(e){this._driver=e}build(e,t,i){let r=new Xo(t);return this._resetContextStyleTimingState(r),Xe(this,cn(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=Rc,e.collectedStyles=new Map,e.collectedStyles.set(Rc,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(hp()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==ie.State){let l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,o.push(this.visitState(l,t))}),l.name=u}else if(a.type==ie.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(gp())}),{type:ie.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Yc(l).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(yp(e.name,[...o.values()]))}return{type:ie.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=Xe(this,cn(e.animation),t),r=Jp(e.expr,t.errors);return{type:ie.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:fi(e.options)}}visitSequence(e,t){return{type:ie.Sequence,steps:e.steps.map(i=>Xe(this,i,t)),options:fi(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=Xe(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:ie.Group,steps:o,options:fi(e.options)}}visitAnimate(e,t){let i=sd(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Co({});if(o.type==ie.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};i.easing&&(u.easing=i.easing),s=Co(u)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:ie.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Ct?i.push(a):t.errors.push(vp(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(Wc)>=0){o=!0;break}}}),{type:ie.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let u=t.collectedStyles.get(t.currentQuerySelector),c=u.get(l),f=!0;c&&(o!=r&&o>=c.startTime&&r<=c.endTime&&(t.errors.push(Sp(l,c.startTime,c.endTime,o,r)),f=!1),o=c.startTime),f&&u.set(l,{startTime:o,endTime:r}),t.options&&Wp(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:ie.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Cp()),i;let r=1,o=0,s=[],a=!1,l=!1,u=0,c=e.steps.map(d=>{let y=this._makeStyleAst(d,t),_=y.offset!=null?y.offset:od(y.styles),E=0;return _!=null&&(o++,E=y.offset=_),l=l||E<0||E>1,a=a||E<u,u=E,s.push(E),y});l&&t.errors.push(_p()),a&&t.errors.push(bp());let f=e.steps.length,S=0;o>0&&o<f?t.errors.push(Ep()):o==0&&(S=r/(f-1));let x=f-1,h=t.currentTime,p=t.currentAnimateTimings,m=p.duration;return c.forEach((d,y)=>{let _=S>0?y==x?1:S*y:s[y],E=_*m;t.currentTime=h+p.delay+E,p.duration=E,this._validateStyleAst(d,t),d.offset=_,i.styles.push(d)}),i}visitReference(e,t){return{type:ie.Reference,animation:Xe(this,cn(e.animation),t),options:fi(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:ie.AnimateChild,options:fi(e.options)}}visitAnimateRef(e,t){return{type:ie.AnimateRef,animation:this.visitReference(e.animation,t),options:fi(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=nd(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Ze(t.collectedStyles,t.currentQuerySelector,new Map);let a=Xe(this,cn(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:ie.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:fi(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Tp());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:jr(e.timings,t.errors,!0);return{type:ie.Stagger,animation:Xe(this,cn(e.animation),t),timings:i,options:null}}};function nd(n){let e=!!n.split(/\s*,\s*/).find(t=>t==Xc);return e&&(n=n.replace(id,"")),n=n.replace(/@\*/g,Vr).replace(/@\w+/g,t=>Vr+"-"+t.slice(1)).replace(/:animating/g,Go),[n,e]}function rd(n){return n?k({},n):null}var Xo=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function od(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function sd(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=jr(n,e).duration;return jo(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=jo(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=jr(t,e);return jo(r.duration,r.delay,r.easing)}function fi(n){return n?(n=k({},n),n.params&&(n.params=rd(n.params))):n={},n}function jo(n,e,t){return{duration:n,delay:e,easing:t}}function fs(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var pn=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},ad=1,ld=":enter",cd=new RegExp(ld,"g"),ud=":leave",md=new RegExp(ud,"g");function Jc(n,e,t,i,r,o=new Map,s=new Map,a,l,u=[]){return new Zo().buildKeyframes(n,e,t,i,r,o,s,a,l,u)}var Zo=class{buildKeyframes(e,t,i,r,o,s,a,l,u,c=[]){u=u||new pn;let f=new Jo(e,t,u,r,o,c,[]);f.options=l;let S=l.delay?kt(l.delay):0;f.currentTimeline.delayNextStep(S),f.currentTimeline.setStyles([s],null,f.errors,l),Xe(this,i,f);let x=f.timelines.filter(h=>h.containsAnimation());if(x.length&&a.size){let h;for(let p=x.length-1;p>=0;p--){let m=x[p];if(m.element===t){h=m;break}}h&&!h.allowOnlyTimelineStyles()&&h.setStyles([a],null,f.errors,l)}return x.length?x.map(h=>h.buildKeyframes()):[fs(t,[],[],[],0,S,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:kt(mn(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?kt(i.duration):null,a=i.delay!=null?kt(i.delay):null;return s!==0&&e.forEach(l=>{let u=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Xe(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==ie.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=zr);let s=kt(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Xe(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?kt(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),Xe(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?mn(i,t.params,t.errors):i;return jr(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==ie.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let u=l.offset||0;a.forwardTime(u*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?kt(r.delay):0;o&&(t.previousNode.type===ie.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=zr);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,c)=>{t.currentQueryIndex=c;let f=t.createSubContext(e.options,u);o&&f.delayNextStep(o),u===t.element&&(l=f.currentTimeline),Xe(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let S=f.currentTimeline.currentTime;s=Math.max(s,S)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let c=t.currentTimeline;l&&c.delayNextStep(l);let f=c.currentTime;Xe(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}},zr={},Jo=class n{constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new qr(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=kt(i.duration)),i.delay!=null&&(r.delay=kt(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=mn(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=zr,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new es(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(cd,"."+this._enterClassName),e=e.replace(md,"."+this._leaveClassName);let l=i!=1,u=this._driver.query(this.element,e,l);i!==0&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!o&&a.length==0&&s.push(xp(t)),a}},qr=class n{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=ad,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Ct),this._currentKeyframe.set(t,Ct);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=pd(e,this._globalTimelineStyles);for(let[a,l]of s){let u=mn(l,o,i);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ct),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let u=new Map([...this._backFill,...a]);u.forEach((c,f)=>{c===Nn?e.add(f):c===Ct&&t.add(f)}),i||u.set("offset",l/this.duration),r.push(u)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return fs(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},es=class extends qr{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let u=new Map(e[0]);u.set("offset",Hc(a)),o.push(u);let c=e.length-1;for(let f=1;f<=c;f++){let S=new Map(e[f]),x=S.get("offset"),h=t+x*i;S.set("offset",Hc(h/s)),o.push(S)}i=s,t=0,r="",e=o}return fs(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function Hc(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function pd(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,Ct)}else for(let[o,s]of r)t.set(o,s)}),t}function Lc(n,e,t,i,r,o,s,a,l,u,c,f,S){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:f,errors:S}}var Bo={},Kr=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return dd(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,u,c){let f=[],S=this.ast.options&&this.ast.options.params||Bo,x=a&&a.params||Bo,h=this.buildStyles(i,x,f),p=l&&l.params||Bo,m=this.buildStyles(r,p,f),d=new Set,y=new Map,_=new Map,E=r==="void",w={params:eu(p,S),delay:this.ast.options?.delay},A=c?[]:Jc(e,t,this.ast.animation,o,s,h,m,w,u,f),R=0;return A.forEach(j=>{R=Math.max(j.duration+j.delay,R)}),f.length?Lc(t,this._triggerName,i,r,E,h,m,[],[],y,_,R,f):(A.forEach(j=>{let G=j.element,pe=Ze(y,G,new Set);j.preStyleProps.forEach(we=>pe.add(we));let je=Ze(_,G,new Set);j.postStyleProps.forEach(we=>je.add(we)),G!==t&&d.add(G)}),Lc(t,this._triggerName,i,r,E,h,m,A,[...d.values()],y,_,R))}};function dd(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function eu(n,e){let t=k({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var ts=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=eu(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=mn(s,r,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}};function fd(n,e,t){return new is(n,e,t)}var is=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new ts(r.style,o,i))}),$c(this.states,"true","1"),$c(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Kr(e,r,this.states))}),this.fallbackTransition=hd(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function hd(n,e,t){let i=[(s,a)=>!0],r={type:ie.Sequence,steps:[],options:null},o={type:ie.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Kr(n,o,e)}function $c(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var gd=new pn,ns=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],r=[],o=Zc(this._driver,t,i,r);if(i.length)throw Mp(i);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=qc(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=Jc(this._driver,t,o,Qc,Ko,new Map,new Map,i,gd,r),s.forEach(c=>{let f=Ze(a,c.element,new Map);c.postStyleProps.forEach(S=>f.set(S,null))})):(r.push(Ip()),s=[]),r.length)throw Pp(r);a.forEach((c,f)=>{c.forEach((S,x)=>{c.set(x,this._driver.computeStyle(f,x,Ct))})});let l=s.map(c=>{let f=a.get(c.element);return this._buildPlayer(c,new Map,f)}),u=ti(l);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Fp(e);return t}listen(e,t,i,r){let o=cs(t,"","","");return ls(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},Vc="ng-animate-queued",yd=".ng-animate-queued",Uo="ng-animate-disabled",vd=".ng-animate-disabled",Sd="ng-star-inserted",Cd=".ng-star-inserted",_d=[],tu={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bd={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},lt="__ng_removed",dn=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Td(r),i){let o=e,{value:s}=o,a=Rs(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},un="void",zo=new dn(un),rs=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,st(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw Np(i,t);if(i==null||i.length==0)throw Op(t);if(!xd(i))throw Rp(i,t);let o=Ze(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=Ze(this._engine.statesByElement,e,new Map);return a.has(t)||(st(e,Or),st(e,Or+"-"+t),a.set(t,zo)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Hp(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new fn(this.id,t,e),a=this._engine.statesByElement.get(e);a||(st(e,Or),st(e,Or+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),u=new dn(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=zo),!(u.value===un)&&l.value===u.value){if(!Dd(l.params,u.params)){let p=[],m=o.matchStyles(l.value,l.params,p),d=o.matchStyles(u.value,u.params,p);p.length?this._engine.reportError(p):this._engine.afterFlush(()=>{hi(e,m),wt(e,d)})}return}let S=Ze(this._engine.playersByElement,e,[]);S.forEach(p=>{p.namespaceId==this.id&&p.triggerName==t&&p.queued&&p.destroy()});let x=o.matchTransition(l.value,u.value,e,u.params),h=!1;if(!x){if(!r)return;x=o.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:x,fromState:l,toState:u,player:s,isFallbackTransition:h}),h||(st(e,Vc),s.onStart(()=>{Li(e,Vc)})),s.onDone(()=>{let p=this.players.indexOf(s);p>=0&&this.players.splice(p,1);let m=this._engine.playersByElement.get(e);if(m){let d=m.indexOf(s);d>=0&&m.splice(d,1)}}),this.players.push(s),S.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,Vr,!0);i.forEach(r=>{if(r[lt])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,u)=>{if(s.set(u,l.value),this._triggers.has(u)){let c=this.trigger(e,u,un,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&ti(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,u=i.get(s)||zo,c=new dn(un),f=new fn(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:u,toState:c,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[lt];(!o||o===tu)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){st(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=cs(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,ls(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},os=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i,r){this.bodyNode=e,this.driver=t,this._normalizer=i,this.scheduler=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new rs(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let u=i.indexOf(l);i.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(Lr(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Lr(t))return;let o=t[lt];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),st(e,Uo)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Li(e,Uo))}removeNode(e,t,i){if(Lr(t)){this.scheduler?.notify();let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[lt]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return Lr(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Vr,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Go,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ti(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[lt];if(t&&t.setForRemoval){if(e[lt]=tu,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Uo)&&this.markElementAsDisabled(e,!1),this.driver.query(e,vd,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];st(r,Sd)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?ti(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw Lp(e)}_flushAnimations(e,t){let i=new pn,r=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(H=>{c.add(H);let V=this.driver.query(H,yd,!0);for(let $=0;$<V.length;$++)c.add(V[$])});let f=this.bodyNode,S=Array.from(this.statesByElement.keys()),x=Uc(S,this.collectedEnterElements),h=new Map,p=0;x.forEach((H,V)=>{let $=Qc+p++;h.set(V,$),H.forEach(J=>st(J,$))});let m=[],d=new Set,y=new Set;for(let H=0;H<this.collectedLeaveElements.length;H++){let V=this.collectedLeaveElements[H],$=V[lt];$&&$.setForRemoval&&(m.push(V),d.add(V),$.hasAnimation?this.driver.query(V,Cd,!0).forEach(J=>d.add(J)):y.add(V))}let _=new Map,E=Uc(S,Array.from(d));E.forEach((H,V)=>{let $=Ko+p++;_.set(V,$),H.forEach(J=>st(J,$))}),e.push(()=>{x.forEach((H,V)=>{let $=h.get(V);H.forEach(J=>Li(J,$))}),E.forEach((H,V)=>{let $=_.get(V);H.forEach(J=>Li(J,$))}),m.forEach(H=>{this.processLeaveNode(H)})});let w=[],A=[];for(let H=this._namespaceList.length-1;H>=0;H--)this._namespaceList[H].drainQueuedTransitions(t).forEach($=>{let J=$.player,_e=$.element;if(w.push(J),this.collectedEnterElements.length){let Y=_e[lt];if(Y&&Y.setForMove){if(Y.previousTriggersValues&&Y.previousTriggersValues.has($.triggerName)){let be=Y.previousTriggersValues.get($.triggerName),ue=this.statesByElement.get($.element);if(ue&&ue.has($.triggerName)){let ut=ue.get($.triggerName);ut.value=be,ue.set($.triggerName,ut)}}J.destroy();return}}let Be=!f||!this.driver.containsElement(f,_e),ke=_.get(_e),Ie=h.get(_e),se=this._buildInstruction($,i,Ie,ke,Be);if(se.errors&&se.errors.length){A.push(se);return}if(Be){J.onStart(()=>hi(_e,se.fromStyles)),J.onDestroy(()=>wt(_e,se.toStyles)),r.push(J);return}if($.isFallbackTransition){J.onStart(()=>hi(_e,se.fromStyles)),J.onDestroy(()=>wt(_e,se.toStyles)),r.push(J);return}let D=[];se.timelines.forEach(Y=>{Y.stretchStartingKeyframe=!0,this.disabledNodes.has(Y.element)||D.push(Y)}),se.timelines=D,i.append(_e,se.timelines);let he={instruction:se,player:J,element:_e};s.push(he),se.queriedElements.forEach(Y=>Ze(a,Y,[]).push(J)),se.preStyleProps.forEach((Y,be)=>{if(Y.size){let ue=l.get(be);ue||l.set(be,ue=new Set),Y.forEach((ut,mt)=>ue.add(mt))}}),se.postStyleProps.forEach((Y,be)=>{let ue=u.get(be);ue||u.set(be,ue=new Set),Y.forEach((ut,mt)=>ue.add(mt))})});if(A.length){let H=[];A.forEach(V=>{H.push($p(V.triggerName,V.errors))}),w.forEach(V=>V.destroy()),this.reportError(H)}let R=new Map,j=new Map;s.forEach(H=>{let V=H.element;i.has(V)&&(j.set(V,V),this._beforeAnimationBuild(H.player.namespaceId,H.instruction,R))}),r.forEach(H=>{let V=H.element;this._getPreviousPlayers(V,!1,H.namespaceId,H.triggerName,null).forEach(J=>{Ze(R,V,[]).push(J),J.destroy()})});let G=m.filter(H=>zc(H,l,u)),pe=new Map;Bc(pe,this.driver,y,u,Ct).forEach(H=>{zc(H,l,u)&&G.push(H)});let we=new Map;x.forEach((H,V)=>{Bc(we,this.driver,new Set(H),l,Nn)}),G.forEach(H=>{let V=pe.get(H),$=we.get(H);pe.set(H,new Map([...V?.entries()??[],...$?.entries()??[]]))});let Je=[],Ne=[],Mt={};s.forEach(H=>{let{element:V,player:$,instruction:J}=H;if(i.has(V)){if(c.has(V)){$.onDestroy(()=>wt(V,J.toStyles)),$.disabled=!0,$.overrideTotalTime(J.totalTime),r.push($);return}let _e=Mt;if(j.size>1){let ke=V,Ie=[];for(;ke=ke.parentNode;){let se=j.get(ke);if(se){_e=se;break}Ie.push(ke)}Ie.forEach(se=>j.set(se,_e))}let Be=this._buildAnimation($.namespaceId,J,R,o,we,pe);if($.setRealPlayer(Be),_e===Mt)Je.push($);else{let ke=this.playersByElement.get(_e);ke&&ke.length&&($.parentPlayer=ti(ke)),r.push($)}}else hi(V,J.fromStyles),$.onDestroy(()=>wt(V,J.toStyles)),Ne.push($),c.has(V)&&r.push($)}),Ne.forEach(H=>{let V=o.get(H.element);if(V&&V.length){let $=ti(V);H.setRealPlayer($)}}),r.forEach(H=>{H.parentPlayer?H.syncPlayerEvents(H.parentPlayer):H.destroy()});for(let H=0;H<m.length;H++){let V=m[H],$=V[lt];if(Li(V,Ko),$&&$.hasAnimation)continue;let J=[];if(a.size){let Be=a.get(V);Be&&Be.length&&J.push(...Be);let ke=this.driver.query(V,Go,!0);for(let Ie=0;Ie<ke.length;Ie++){let se=a.get(ke[Ie]);se&&se.length&&J.push(...se)}}let _e=J.filter(Be=>!Be.destroyed);_e.length?wd(this,V,_e):this.processLeaveNode(V)}return m.length=0,Je.forEach(H=>{this.players.push(H),H.onDone(()=>{H.destroy();let V=this.players.indexOf(H);this.players.splice(V,1)}),H.play()}),Je}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==un;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||s.push(u)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let u=l.element,c=u!==o,f=Ze(i,u,[]);this._getPreviousPlayers(u,c,s,a,t.toState).forEach(x=>{let h=x.getRealPlayer();h.beforeDestroy&&h.beforeDestroy(),x.destroy(),f.push(x)})}hi(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,l=t.element,u=[],c=new Set,f=new Set,S=t.timelines.map(h=>{let p=h.element;c.add(p);let m=p[lt];if(m&&m.removedBeforeQueried)return new xi(h.duration,h.delay);let d=p!==l,y=Ad((i.get(p)||_d).map(R=>R.getRealPlayer())).filter(R=>{let j=R;return j.element?j.element===p:!1}),_=o.get(p),E=s.get(p),w=qc(this._normalizer,h.keyframes,_,E),A=this._buildPlayer(h,w,y);if(h.subTimeline&&r&&f.add(p),d){let R=new fn(e,a,p);R.setRealPlayer(A),u.push(R)}return A});u.forEach(h=>{Ze(this.playersByQueriedElement,h.element,[]).push(h),h.onDone(()=>Ed(this.playersByQueriedElement,h.element,h))}),c.forEach(h=>st(h,Nc));let x=ti(S);return x.onDestroy(()=>{c.forEach(h=>Li(h,Nc)),wt(l,t.toStyles)}),f.forEach(h=>{Ze(r,h,[]).push(x)}),x}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new xi(e.duration,e.delay)}},fn=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new xi,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>ls(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ze(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Ed(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Td(n){return n??null}function Lr(n){return n&&n.nodeType===1}function xd(n){return n=="start"||n=="done"}function jc(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Bc(n,e,t,i,r){let o=[];t.forEach(l=>o.push(jc(l)));let s=[];i.forEach((l,u)=>{let c=new Map;l.forEach(f=>{let S=e.computeStyle(u,f,r);c.set(f,S),(!S||S.length==0)&&(u[lt]=bd,s.push(u))}),n.set(u,c)});let a=0;return t.forEach(l=>jc(l,o[a++])),s}function Uc(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let u=a.parentNode;return t.has(u)?l=u:r.has(u)?l=i:l=s(u),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==i&&t.get(l).push(a)}),t}function st(n,e){n.classList?.add(e)}function Li(n,e){n.classList?.remove(e)}function wd(n,e,t){ti(t).onDone(()=>n.processLeaveNode(e))}function Ad(n){let e=[];return iu(n,e),e}function iu(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof _o?iu(i.players,e):e.push(i)}}function Dd(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function zc(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var Vi=class{constructor(e,t,i,r){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new os(e.body,t,i,r),this._timelineEngine=new ns(e.body,t,i),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],u=[],c=Zc(this._driver,o,l,u);if(l.length)throw Dp(r,l);u.length&&void 0,a=fd(r,c,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=Pc(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=Pc(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function kd(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=qo(e[0]),e.length>1&&(i=qo(e[e.length-1]))):e instanceof Map&&(t=qo(e)),t||i?new ss(n,t,i):null}var $i=class $i{constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=$i.initialStylesByElement.get(e);r||$i.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&wt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(wt(this._element,this._initialStyles),this._endStyles&&(wt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&($i.initialStylesByElement.delete(this._element),this._startStyles&&(hi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hi(this._element,this._endStyles),this._endStyles=null),wt(this._element,this._initialStyles),this._state=3)}};$i.initialStylesByElement=new WeakMap;var ss=$i;function qo(n){let e=null;return n.forEach((t,i)=>{Md(i)&&(e=e||new Map,e.set(i,t))}),e}function Md(n){return n==="display"||n==="position"}var Gr=class{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:ds(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Wr=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Kc(e,t)}getParentElement(e){return us(e)}query(e,t,i){return Gc(e,t,i)}computeStyle(e,t,i){return ds(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let u=new Map,c=s.filter(x=>x instanceof Gr);Yp(i,r)&&c.forEach(x=>{x.currentSnapshot.forEach((h,p)=>u.set(p,h))});let f=Gp(t).map(x=>new Map(x));f=Xp(e,f,u);let S=kd(e,f);return new Gr(e,f,l,S)}};var $r="@",nu="@.disabled",Qr=class{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==$r&&t==nu?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},as=class extends Qr{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==$r?t.charAt(1)=="."&&t==nu?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==$r){let r=Id(e),o=t.slice(1),s="";return o.charAt(0)!=$r&&([o,s]=Pd(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,i,a)})}return this.delegate.listen(e,t,i)}};function Id(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Pd(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var Yr=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,o)=>{let s=o?.parentNode(r);s&&o.removeChild(s,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,c=u.get(r);if(!c){let f=()=>u.delete(r);c=new Qr(i,r,this.engine,f),u.set(r,c)}return c}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new as(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Nd=(()=>{let e=class e extends Vi{constructor(i,r,o){super(i,r,o,Se(Js,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(T(ha),T(gi),T(yi))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();function Od(){return new Br}function Rd(n,e,t){return new Yr(n,e,t)}var ou=[{provide:yi,useFactory:Od},{provide:Vi,useClass:Nd},{provide:ea,useFactory:Rd,deps:[Ea,Vi,bn]}],ru=[{provide:gi,useFactory:()=>new Wr},{provide:mo,useValue:"BrowserAnimations"},...ou],Hd=[{provide:gi,useClass:ms},{provide:mo,useValue:"NoopAnimations"},...ou],su=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?Hd:ru}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ht({type:e}),e.\u0275inj=Rt({providers:ru,imports:[Tn]});let n=e;return n})();var gn="PERFORM_ACTION",Ld="REFRESH",pu="RESET",du="ROLLBACK",fu="COMMIT",hu="SWEEP",gu="TOGGLE_ACTION",$d="SET_ACTIONS_ACTIVE",yu="JUMP_TO_STATE",vu="JUMP_TO_ACTION",Ds="IMPORT_STATE",Su="LOCK_CHANGES",Cu="PAUSE_RECORDING",ji=class{constructor(e,t){if(this.action=e,this.timestamp=t,this.type=gn,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},gs=class{constructor(){this.type=Ld}},ys=class{constructor(e){this.timestamp=e,this.type=pu}},vs=class{constructor(e){this.timestamp=e,this.type=du}},Ss=class{constructor(e){this.timestamp=e,this.type=fu}},Cs=class{constructor(){this.type=hu}},_s=class{constructor(e){this.id=e,this.type=gu}};var bs=class{constructor(e){this.index=e,this.type=yu}},Es=class{constructor(e){this.actionId=e,this.type=vu}},Ts=class{constructor(e){this.nextLiftedState=e,this.type=Ds}},xs=class{constructor(e){this.status=e,this.type=Su}},ws=class{constructor(e){this.status=e,this.type=Cu}};var eo=new Bi("@ngrx/store-devtools Options"),au=new Bi("@ngrx/store-devtools Initial Config");function _u(){return null}var Vd="NgRx Store DevTools";function jd(n){let e={maxAge:!1,monitor:_u,actionSanitizer:void 0,stateSanitizer:void 0,name:Vd,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof n=="function"?n():n,i=t.logOnly?{pause:!0,export:!0,test:!0}:!1,r=t.features||i||e.features;r.import===!0&&(r.import="custom");let o=Object.assign({},e,{features:r},t);if(o.maxAge&&o.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${o.maxAge}`);return o}function lu(n,e){return n.filter(t=>e.indexOf(t)<0)}function bu(n){let{computedStates:e,currentStateIndex:t}=n;if(t>=e.length){let{state:r}=e[e.length-1];return r}let{state:i}=e[t];return i}function hn(n){return new ji(n,+Date.now())}function Bd(n,e){return Object.keys(e).reduce((t,i)=>{let r=Number(i);return t[r]=Eu(n,e[r],r),t},{})}function Eu(n,e,t){return N(k({},e),{action:n(e.action,t)})}function Ud(n,e){return e.map((t,i)=>({state:Tu(n,t.state,i),error:t.error}))}function Tu(n,e,t){return n(e,t)}function xu(n){return n.predicate||n.actionsSafelist||n.actionsBlocklist}function zd(n,e,t,i){let r=[],o={},s=[];return n.stagedActionIds.forEach((a,l)=>{let u=n.actionsById[a];u&&(l&&ks(n.computedStates[l],u,e,t,i)||(o[a]=u,r.push(a),s.push(n.computedStates[l])))}),N(k({},n),{stagedActionIds:r,actionsById:o,computedStates:s})}function ks(n,e,t,i,r){let o=t&&!t(n,e.action),s=i&&!e.action.type.match(i.map(l=>cu(l)).join("|")),a=r&&e.action.type.match(r.map(l=>cu(l)).join("|"));return o||s||a}function cu(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wu(n){return{ngZone:n?Se(bn):null,connectInZone:n}}var to=(()=>{let e=class e extends xn{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Xs(e)))(o||e)}})(),e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})(),Xr={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},As=new Bi("@ngrx/store-devtools Redux Devtools Extension"),Au=(()=>{let e=class e{constructor(i,r,o){this.config=r,this.dispatcher=o,this.zoneConfig=wu(this.config.connectInZone),this.devtoolsExtension=i,this.createActionStreams()}notify(i,r){if(this.devtoolsExtension)if(i.type===gn){if(r.isLocked||r.isPaused)return;let o=bu(r);if(xu(this.config)&&ks(o,i,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let s=this.config.stateSanitizer?Tu(this.config.stateSanitizer,o,r.currentStateIndex):o,a=this.config.actionSanitizer?Eu(this.config.actionSanitizer,i,r.nextActionId):i;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,s))}else{let o=N(k({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?Bd(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?Ud(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new lo(i=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(o=>i.next(o)),r.unsubscribe}):$s}createActionStreams(){let i=this.createChangesObservable().pipe(Ks()),r=i.pipe(fe(c=>c.type===Xr.START)),o=i.pipe(fe(c=>c.type===Xr.STOP)),s=i.pipe(fe(c=>c.type===Xr.DISPATCH),I(c=>this.unwrapAction(c.payload)),Bs(c=>c.type===Ds?this.dispatcher.pipe(fe(f=>f.type===go),js(1e3),ni(1e3),I(()=>c),z(()=>M(c)),Oe(1)):M(c))),l=i.pipe(fe(c=>c.type===Xr.ACTION),I(c=>this.unwrapAction(c.payload))).pipe(Fe(o)),u=s.pipe(Fe(o));this.start$=r.pipe(Fe(o)),this.actions$=this.start$.pipe(P(()=>l)),this.liftedActions$=this.start$.pipe(P(()=>u))}unwrapAction(i){return typeof i=="string"?(0,eval)(`(${i})`):i}getExtensionConfig(i){let r={name:i.name,features:i.features,serialize:i.serialize,autoPause:i.autoPause??!1,trace:i.trace??!1,traceLimit:i.traceLimit??75};return i.maxAge!==!1&&(r.maxAge=i.maxAge),r}sendToReduxDevtools(i){try{i()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}};e.\u0275fac=function(r){return new(r||e)(T(As),T(eo),T(to))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})(),Jr={type:ho},qd="@ngrx/store-devtools/recompute",Kd={type:qd};function Du(n,e,t,i,r){if(i)return{state:t,error:"Interrupted by an error up the chain"};let o=t,s;try{o=n(t,e)}catch(a){s=a.toString(),r.handleError(a)}return{state:o,error:s}}function Zr(n,e,t,i,r,o,s,a,l){if(e>=n.length&&n.length===o.length)return n;let u=n.slice(0,e),c=o.length-(l?1:0);for(let f=e;f<c;f++){let S=o[f],x=r[S].action,h=u[f-1],p=h?h.state:i,m=h?h.error:void 0,y=s.indexOf(S)>-1?h:Du(t,x,p,m,a);u.push(y)}return l&&u.push(n[n.length-1]),u}function Gd(n,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:hn(Jr)},stagedActionIds:[0],skippedActionIds:[],committedState:n,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Wd(n,e,t,i,r={}){return o=>(s,a)=>{let{monitorState:l,actionsById:u,nextActionId:c,stagedActionIds:f,skippedActionIds:S,committedState:x,currentStateIndex:h,computedStates:p,isLocked:m,isPaused:d}=s||e;s||(u=Object.create(u));function y(w){let A=w,R=f.slice(1,A+1);for(let j=0;j<R.length;j++)if(p[j+1].error){A=j,R=f.slice(1,A+1);break}else delete u[R[j]];S=S.filter(j=>R.indexOf(j)===-1),f=[0,...f.slice(A+1)],x=p[A].state,p=p.slice(A),h=h>A?h-A:0}function _(){u={0:hn(Jr)},c=1,f=[0],S=[],x=p[h].state,h=0,p=[]}let E=0;switch(a.type){case Su:{m=a.status,E=1/0;break}case Cu:{d=a.status,d?(f=[...f,c],u[c]=new ji({type:"@ngrx/devtools/pause"},+Date.now()),c++,E=f.length-1,p=p.concat(p[p.length-1]),h===f.length-2&&h++,E=1/0):_();break}case pu:{u={0:hn(Jr)},c=1,f=[0],S=[],x=n,h=0,p=[];break}case fu:{_();break}case du:{u={0:hn(Jr)},c=1,f=[0],S=[],h=0,p=[];break}case gu:{let{id:w}=a;S.indexOf(w)===-1?S=[w,...S]:S=S.filter(R=>R!==w),E=f.indexOf(w);break}case $d:{let{start:w,end:A,active:R}=a,j=[];for(let G=w;G<A;G++)j.push(G);R?S=lu(S,j):S=[...S,...j],E=f.indexOf(w);break}case yu:{h=a.index,E=1/0;break}case vu:{let w=f.indexOf(a.actionId);w!==-1&&(h=w),E=1/0;break}case hu:{f=lu(f,S),S=[],h=Math.min(h,f.length-1);break}case gn:{if(m)return s||e;if(d||s&&ks(s.computedStates[h],a,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let A=p[p.length-1];p=[...p.slice(0,-1),Du(o,a.action,A.state,A.error,t)],E=1/0;break}r.maxAge&&f.length===r.maxAge&&y(1),h===f.length-1&&h++;let w=c++;u[w]=a,f=[...f,w],E=f.length-1;break}case Ds:{({monitorState:l,actionsById:u,nextActionId:c,stagedActionIds:f,skippedActionIds:S,committedState:x,currentStateIndex:h,computedStates:p,isLocked:m,isPaused:d}=a.nextLiftedState);break}case ho:{E=0,r.maxAge&&f.length>r.maxAge&&(p=Zr(p,E,o,x,u,f,S,t,d),y(f.length-r.maxAge),E=1/0);break}case go:{if(p.filter(A=>A.error).length>0)E=0,r.maxAge&&f.length>r.maxAge&&(p=Zr(p,E,o,x,u,f,S,t,d),y(f.length-r.maxAge),E=1/0);else{if(!d&&!m){h===f.length-1&&h++;let A=c++;u[A]=new ji(a,+Date.now()),f=[...f,A],E=f.length-1,p=Zr(p,E,o,x,u,f,S,t,d)}p=p.map(A=>N(k({},A),{state:o(A.state,Kd)})),h=f.length-1,r.maxAge&&f.length>r.maxAge&&y(f.length-r.maxAge),E=1/0}break}default:{E=1/0;break}}return p=Zr(p,E,o,x,u,f,S,t,d),l=i(l,a),{monitorState:l,actionsById:u,nextActionId:c,stagedActionIds:f,skippedActionIds:S,committedState:x,currentStateIndex:h,computedStates:p,isLocked:m,isPaused:d}}}var uu=(()=>{let e=class e{constructor(i,r,o,s,a,l,u,c){let f=Gd(u,c.monitor),S=Wd(u,f,l,c.monitor,c),x=uo(uo(r.asObservable().pipe(Gs(1)),s.actions$).pipe(I(hn)),i,s.liftedActions$).pipe(Vs(Ls)),h=o.pipe(I(S)),p=wu(c.connectInZone),m=new Hs(1);this.liftedStateSubscription=x.pipe(Ws(h),mu(p),qs(({state:_},[E,w])=>{let A=w(_,E);return E.type!==gn&&xu(c)&&(A=zd(A,c.predicate,c.actionsSafelist,c.actionsBlocklist)),s.notify(E,A),{state:A,action:E}},{state:f,action:null})).subscribe(({state:_,action:E})=>{if(m.next(_),E.type===gn){let w=E.action;a.next(w)}}),this.extensionStartSubscription=s.start$.pipe(mu(p)).subscribe(()=>{this.refresh()});let d=m.asObservable(),y=d.pipe(I(bu));Object.defineProperty(y,"state",{value:Ia(y,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=i,this.liftedState=d,this.state=y}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(i){this.dispatcher.next(i)}next(i){this.dispatcher.next(i)}error(i){}complete(){}performAction(i){this.dispatch(new ji(i,+Date.now()))}refresh(){this.dispatch(new gs)}reset(){this.dispatch(new ys(+Date.now()))}rollback(){this.dispatch(new vs(+Date.now()))}commit(){this.dispatch(new Ss(+Date.now()))}sweep(){this.dispatch(new Cs)}toggleAction(i){this.dispatch(new _s(i))}jumpToAction(i){this.dispatch(new Es(i))}jumpToState(i){this.dispatch(new bs(i))}importState(i){this.dispatch(new Ts(i))}lockChanges(i){this.dispatch(new xs(i))}pauseRecording(i){this.dispatch(new ws(i))}};e.\u0275fac=function(r){return new(r||e)(T(to),T(xn),T(Fa),T(Au),T(Oa),T(Zs),T(Pa),T(eo))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();function mu({ngZone:n,connectInZone:e}){return t=>e?new lo(i=>t.subscribe({next:r=>n.run(()=>i.next(r)),error:r=>n.run(()=>i.error(r)),complete:()=>n.run(()=>i.complete())})):t}var Qd=new Bi("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Yd(n,e){return!!n||e.monitor!==_u}function Xd(){let n="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[n]<"u"?window[n]:null}function Zd(n={}){return Ys([Au,to,uu,{provide:au,useValue:n},{provide:Qd,deps:[As,eo],useFactory:Yd},{provide:As,useFactory:Xd},{provide:eo,deps:[au],useFactory:jd},{provide:Ra,deps:[uu],useFactory:Jd},{provide:Na,useExisting:to}])}function Jd(n){return n.state}var ku=(()=>{let e=class e{static instrument(i={}){return{ngModule:e,providers:[Zd(i)]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ht({type:e}),e.\u0275inj=Rt({});let n=e;return n})();var Mu={production:!0};var ef={processorTypes:[],controllerServiceTypes:[],prioritizerTypes:[],reportingTaskTypes:[],registryClientTypes:[],flowAnalysisRuleTypes:[],parameterProviderTypes:[],status:"pending"},Iu=Ee(ef,B(Jn,n=>N(k({},n),{status:"loading"})),B(er,(n,{response:e})=>N(k({},n),{processorTypes:e.processorTypes,controllerServiceTypes:e.controllerServiceTypes,prioritizerTypes:e.prioritizers,status:"success"})),B(tr,(n,{response:e})=>N(k({},n),{controllerServiceTypes:e.controllerServiceTypes,reportingTaskTypes:e.reportingTaskTypes,registryClientTypes:e.registryClientTypes,parameterProviderTypes:e.parameterProviderTypes,flowAnalysisRuleTypes:e.flowAnalysisRuleTypes,status:"success"})),B(ir,(n,{response:e})=>N(k({},n),{processorTypes:e.processorTypes,controllerServiceTypes:e.controllerServiceTypes,reportingTaskTypes:e.reportingTaskTypes,parameterProviderTypes:e.parameterProviderTypes,flowAnalysisRuleTypes:e.flowAnalysisRuleTypes,status:"success"})));var tf={about:null,status:"pending"},Pu=Ee(tf,B(Kn,n=>N(k({},n),{status:"loading"})),B(Gn,(n,{response:e})=>N(k({},n),{about:e.about,status:"success"})));var io="status-history";var yn={statusHistory:{},status:"pending",loadedTimestamp:""},Fu=Ee(yn,B(ci,$n,n=>N(k({},n),{status:"loading"})),B(Mi,Ki,(n,{response:e})=>N(k({},n),{status:"success",loadedTimestamp:e.statusHistory.statusHistory.generated,statusHistory:e.statusHistory})),B(Gi,n=>N(k({},n),{status:"error"})),B(xl,()=>k({},yn)),B(Vn,jn,()=>k({},yn)));var Nu={setEnableRequest:{enable:!0,currentStep:de.Pending,scope:"SERVICE_ONLY"},controllerService:null,status:"pending"},Ou=Ee(Nu,B(nc,()=>k({},Nu)),B(rc,(n,{request:e})=>N(k({},n),{controllerService:e.controllerService})),B(Cr,(n,{request:e})=>N(k({},n),{setEnableRequest:{enable:!0,currentStep:de.EnableService,scope:e.scope}})),B(_r,n=>N(k({},n),{setEnableRequest:{enable:!1,currentStep:de.StopReferencingComponents,scope:"SERVICE_AND_REFERENCING_COMPONENTS"}})),B(nn,on,(n,{response:e})=>N(k({},n),{controllerService:e.controllerService,setEnableRequest:N(k({},n.setEnableRequest),{currentStep:e.currentStep})})),B(Er,rn,(n,{response:e})=>li(n,t=>{t.controllerService&&(t.controllerService.component.referencingComponents=e.referencingComponents),t.setEnableRequest.currentStep=e.currentStep})),B(Et,(n,{response:e})=>N(k({},n),{setEnableRequest:N(k({},n.setEnableRequest),{error:e}),status:"error"})));var Ms={systemDiagnostics:null,status:"pending",loadedTimestamp:""},Ru=Ee(Ms,B(Ii,Un,n=>N(k({},n),{status:"loading"})),B(Wi,Bn,(n,{response:e})=>N(k({},n),{status:"success",loadedTimestamp:e.systemDiagnostics.aggregateSnapshot.statsLastRefreshed,systemDiagnostics:e.systemDiagnostics})),B(Qi,Pi,n=>N(k({},n),{status:"error"})),B(wl,()=>k({},Ms)),B(zn,()=>k({},Ms)));var no="componentState";var Hu={componentName:null,componentUri:null,componentState:null,canClear:null,status:"pending"},Lu=Ee(Hu,B(nr,(n,{request:e})=>N(k({},n),{componentName:e.componentName,componentUri:e.componentUri,canClear:e.canClear,status:"loading"})),B(en,or,(n,{response:e})=>N(k({},n),{status:"success",componentState:e.componentState})),B(sr,()=>k({},Hu)));var nf={documentationParameters:null},$u=Ee(nf,B(Ln,(n,{request:e})=>N(k({},n),{documentationParameters:e.parameters})),B(Cl,n=>N(k({},n),{documentationParameters:null})));var rf={disconnectionAcknowledged:!1,connectedStateChanged:!1,clusterSummary:null,searchResults:null,status:"pending"},Vu=Ee(rf,B(Yi,n=>N(k({},n),{status:"loading"})),B(Qn,(n,{response:e})=>N(k({},n),{clusterSummary:e.clusterSummary,status:"success"})),B(Yn,(n,{response:e})=>N(k({},n),{searchResults:e})),B(ui,n=>N(k({},n),{connectedStateChanged:!0})),B(Fl,n=>N(k({},n),{connectedStateChanged:!1})),B(Xi,(n,{disconnectionAcknowledged:e})=>N(k({},n),{disconnectionAcknowledged:e})));var of={loginConfiguration:null,status:"pending"},ju=Ee(of,B(Pr,n=>N(k({},n),{status:"loading"})),B(Jt,(n,{response:e})=>N(k({},n),{loginConfiguration:e.loginConfiguration,status:"success"})));var Bu={results:[],status:"pending",requestContext:null,activeRequest:null,configurationAnalysis:null,attributes:null},Uu=Ee(Bu,B(Ri,(n,{response:e})=>li(n,t=>{t.status="loading",t.configurationAnalysis=e.configurationAnalysis,t.requestContext=e.requestContext,e.configurationAnalysis.supportsVerification&&(t.attributes=e.configurationAnalysis.referencedAttributes)})),B(Ni,(n,{response:e})=>N(k({},n),{configurationAnalysis:e.configurationAnalysis,requestContext:e.requestContext})),B(ln,an,(n,{response:e})=>N(k({},n),{activeRequest:e.request,results:e.request.results||[]})),B(Dr,n=>N(k({},n),{activeRequest:null,status:"success"})),B(lc,n=>N(k({},Bu),{attributes:n.attributes})));var sf={backNavigations:[]},zu=Ee(sf,B(Fr,(n,{backNavigation:e})=>li(n,t=>{if(t.backNavigations.length>0){let i=t.backNavigations[t.backNavigations.length-1];af(i.route,e.route)&&t.backNavigations.push(e)}else t.backNavigations.push(e)})),B(Nr,(n,{url:e})=>li(n,t=>{for(;t.backNavigations.length>0;){let i=t.backNavigations[t.backNavigations.length-1];if(!e.startsWith(i.routeBoundary.join("/")))t.backNavigations.pop();else break}})));function af(n,e){if(n.length!==e.length)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}var lf={bannerText:null,status:"pending"},qu=Ee(lf,B(Xn,n=>N(k({},n),{status:"loading"})),B(Zn,(n,{response:e})=>N(k({},n),{bannerText:e.bannerText,status:"success"})));var Ku={[Ja]:Xa,[yl]:gl,[ja]:Ec,[Yl]:Iu,[fc]:Pu,[Ll]:qu,[Rl]:zu,[Al]:Tc,[Ua]:ju,[io]:Fu,[ic]:Ou,[vc]:Ru,[no]:Lu,[Sl]:$u,[Ol]:Vu,[ec]:Uu};var Gu=(()=>{let e=class e{constructor(i,r,o,s,a,l){this.actions$=i,this.store=r,this.router=o,this.userService=s,this.authService=a,this.errorHelper=l,this.loadCurrentUser$=O(()=>this.actions$.pipe(F(yo),P(()=>Q(this.userService.getUser().pipe(I(u=>An({response:{user:u}})),z(u=>M(this.errorHelper.fullScreenError(u)))))))),this.startCurrentUserPolling$=O(()=>this.actions$.pipe(F(La),P(()=>Ot(3e4,Nt).pipe(Fe(this.actions$.pipe(F(Dn))))),P(()=>M(yo())))),this.navigateToLogIn$=O(()=>this.actions$.pipe(F(kn),me(()=>{this.router.navigate(["/login"])})),{dispatch:!1}),this.logout$=O(()=>this.actions$.pipe(F(Va),P(()=>Q(this.authService.logout()).pipe(I(()=>vo()),z(u=>M(this.errorHelper.fullScreenError(u))))))),this.navigateToLogOut$=O(()=>this.actions$.pipe(F(vo),xe(()=>this.store.select(za)),me(([,u])=>{u&&(window.location.href=u)})),{dispatch:!1})}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(ne),T(_i),T(Ir),T(Ut),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var Wu=(n,e)=>{let t=Se(ne);return e(n).pipe(z(i=>{if(i instanceof En&&i.status===401)return vi([t.select(Mn).pipe(Oe(1),me(()=>t.dispatch($a()))),t.select(Ti).pipe(Oe(1)),t.select(vl).pipe(Oe(1),me(()=>t.dispatch(Ba({routedToFullScreenError:!0}))))]).pipe(P(([r,o,s])=>(r.status==="pending"&&o?.loginSupported&&!s?t.dispatch(kn()):t.dispatch(zt({errorDetail:{title:"Unauthorized",message:"Your session has expired. Please navigate home to log in again."}})),_n)));throw i}))};var Qu=(()=>{let e=class e{constructor(i,r,o){this.actions$=i,this.extensionTypesService=r,this.errorHelper=o,this.loadExtensionTypesForCanvas$=O(()=>this.actions$.pipe(F(Jn),P(()=>vi([this.extensionTypesService.getProcessorTypes(),this.extensionTypesService.getControllerServiceTypes(),this.extensionTypesService.getPrioritizers()]).pipe(I(([s,a,l])=>er({response:{processorTypes:s.processorTypes,controllerServiceTypes:a.controllerServiceTypes,prioritizers:l.prioritizerTypes}})),z(s=>M(Ji({error:s}))))))),this.loadExtensionTypesForSettings$=O(()=>this.actions$.pipe(F(Vl),P(()=>vi([this.extensionTypesService.getControllerServiceTypes(),this.extensionTypesService.getReportingTaskTypes(),this.extensionTypesService.getRegistryClientTypes(),this.extensionTypesService.getParameterProviderTypes(),this.extensionTypesService.getFlowAnalysisRuleTypes()]).pipe(I(([s,a,l,u,c])=>tr({response:{controllerServiceTypes:s.controllerServiceTypes,reportingTaskTypes:a.reportingTaskTypes,registryClientTypes:l.flowRegistryClientTypes,parameterProviderTypes:u.parameterProviderTypes,flowAnalysisRuleTypes:c.flowAnalysisRuleTypes}})),z(s=>M(Ji({error:s}))))))),this.loadExtensionTypesForPolicies$=O(()=>this.actions$.pipe(F(jl),P(()=>vi([this.extensionTypesService.getProcessorTypes(),this.extensionTypesService.getControllerServiceTypes(),this.extensionTypesService.getReportingTaskTypes(),this.extensionTypesService.getParameterProviderTypes(),this.extensionTypesService.getFlowAnalysisRuleTypes()]).pipe(I(([s,a,l,u,c])=>ir({response:{processorTypes:s.processorTypes,controllerServiceTypes:a.controllerServiceTypes,reportingTaskTypes:l.reportingTaskTypes,parameterProviderTypes:u.parameterProviderTypes,flowAnalysisRuleTypes:c.flowAnalysisRuleTypes}})),z(s=>M(Ji({error:s}))))))),this.extensionTypesApiError$=O(()=>this.actions$.pipe(F(Ji),I(s=>s.error),P(s=>M(Te({error:this.errorHelper.getErrorString(s,"Failed to load extension types. You may not be able to create new Processors, Controller Services, Reporting Tasks, Parameter Providers, or Flow Analysis Rules.")})))))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(oc),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var Yu=(n,e)=>{let t=Se(ne);return e(n).pipe(z(i=>{if(i instanceof En&&i.status===0)return t.dispatch(Dn()),t.dispatch(bc()),t.dispatch(Wn()),t.dispatch(zt({errorDetail:{title:"Unable to communicate with NiFi",message:"Please ensure the application is running and check the logs for any errors."}})),_n;throw i}))};var Xu=(()=>{let e=class e{constructor(i){this.httpClient=i}getAbout(){return this.httpClient.get(`${e.API}/flow/about`)}};e.API="../nifi-api",e.\u0275fac=function(r){return new(r||e)(T(Le))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function mf(n,e){if(n&1&&(v(0,"div",9),C(1),g()),n&2){let t=L();b(),Ce(t.buildTimestamp)}}function pf(n,e){if(n&1&&(v(0,"div",9),C(1),g()),n&2){let t=L();b(),te("Tagged ",t.buildTag,"")}}function df(n,e){if(n&1&&(v(0,"div",9),C(1),g()),n&2){let t=L();b(),Ci("From ",t.buildRevision," on branch ",t.buildBranch,"")}}function ff(n,e){if(n&1&&(v(0,"div",5),X(1,"img",6),g(),v(2,"div",7)(3,"div",8),C(4),g(),K(5,mf,2,1,"div",9)(6,pf,2,1,"div",9)(7,df,2,2,"div",9),g(),v(8,"div"),C(9," Apache NiFi is a framework to support highly scalable and flexible dataflows. It can be run on laptops up through clusters of enterprise class servers. Instead of dictating a particular dataflow or behavior it empowers you to design your own optimal dataflow tailored to your specific environment. "),g()),n&2){let t=e;b(4),Ce(t.version),b(),W(5,t.buildTimestamp?5:-1),b(),W(6,t.buildTag&&t.buildTag!=="HEAD"?6:-1),b(),W(7,t.buildRevision?7:-1)}}var Zu=(()=>{let e=class e extends bt{constructor(i){super(),this.store=i,this.about$=this.store.select(hc)}};e.\u0275fac=function(r){return new(r||e)(ee(ne))},e.\u0275cmp=Ae({type:e,selectors:[["about"]],standalone:!0,features:[it,Me],decls:10,vars:3,consts:[[1,"about-dialog"],["mat-dialog-title",""],[1,"flex","flex-col","justify-between","gap-y-5"],["align","end"],["mat-button","","mat-dialog-close",""],[1,"flex","justify-center"],["ngSrc","assets/icons/nifi-logo-about.svg","priority","","width","300","height","128","alt","NiFi Logo"],[1,"flex","flex-col","gap-y-1"],[1,"font-bold"],[1,"text-sm","ml-2"]],template:function(r,o){if(r&1&&(v(0,"div",0)(1,"h2",1),C(2,"About"),g(),v(3,"mat-dialog-content")(4,"div",2),K(5,ff,10,4),Re(6,"async"),g()(),v(7,"mat-dialog-actions",3)(8,"button",4),C(9,"Close"),g()()()),r&2){let s;b(5),W(5,(s=He(6,1,o.about$))?5:-1,s)}},dependencies:[Qt,Ve,_t,qe,Ke,We,Ge,yr,vr,dt,rt,Di,Rn,va],styles:[".about-dialog[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block}"]});let n=e;return n})();var Ju=(()=>{let e=class e{constructor(i,r,o,s){this.actions$=i,this.aboutService=r,this.dialog=o,this.errorHelper=s,this.loadAbout$=O(()=>this.actions$.pipe(F(Kn),P(()=>Q(this.aboutService.getAbout().pipe(I(a=>Gn({response:a})),z(a=>M(Te({error:this.errorHelper.getErrorString(a)})))))))),this.openAboutDialog$=O(()=>this.actions$.pipe(F(Il),me(()=>{this.dialog.open(Zu,N(k({},Gt),{autoFocus:!1}))})),{dispatch:!1})}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(Xu),T(Pe),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var ro=(()=>{let e=class e{constructor(i,r){this.httpClient=i,this.client=r}getComponentStatusHistory(i,r){let o;switch(i){case qi.Processor:o="processors";break;case qi.ProcessGroup:o="process-groups";break;case qi.Connection:o="connections";break;case qi.RemoteProcessGroup:o="remote-process-groups";break;default:o="processors"}return this.httpClient.get(`${e.API}/flow/${o}/${encodeURIComponent(r)}/status/history`)}getNodeStatusHistory(){return this.httpClient.get(`${e.API}/controller/status/history`)}};e.API="../nifi-api",e.\u0275fac=function(r){return new(r||e)(T(Le),T(Yt))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Fs=wn(io),oo=Dt(Fs,n=>n.statusHistory),tm=Dt(oo,n=>n.statusHistory?.componentDetails),im=Dt(oo,n=>n.statusHistory?.fieldDescriptors);var ct={nifiInstanceId:"nifi-instance-id",nifiInstanceLabel:"NiFi"};var nm=(()=>{let e=class e{set instances(i){this._instances=i,this._selectedDescriptor&&this.updateChart(this._selectedDescriptor)}get instances(){return this._instances}set selectedFieldDescriptor(i){this._selectedDescriptor!==i&&(this.brushSelection=null,this._selectedDescriptor=i,i&&this.updateChart(i))}get selectedFieldDescriptor(){return this._selectedDescriptor}set visibleInstances(i){this._visibleInstances=i,this._selectedDescriptor&&this.updateChart(this._selectedDescriptor)}get visibleInstances(){return this._visibleInstances}constructor(i){this.nifiCommon=i,this._selectedDescriptor=null,this._visibleInstances={},this.nodeStats=new tt,this.clusterStats=new tt,this.nodeStats$=new co,this.clusterStats$=new co,this.nodes=[],this.formatters={DURATION:r=>this.nifiCommon.formatDuration(r),COUNT:r=>r%1===0?this.nifiCommon.formatInteger(r):this.nifiCommon.formatFloat(r),DATA_SIZE:r=>this.nifiCommon.formatDataSize(r),FRACTION:r=>this.nifiCommon.formatFloat(r/1e6)},this.brushSelection=null,this.nodeStats$.pipe(ni(20),ze()).subscribe(r=>{this.nodeStats.next(r)}),this.clusterStats$.pipe(ni(20),ze()).subscribe(r=>{this.clusterStats.next(r)})}updateChart(i){let r={top:15,right:20,bottom:25,left:80},o=pc(dc),s=this.instances.map(D=>D.label);o.domain(s);let a=this.instances.map(D=>({id:D.id,label:D.label,values:D.snapshots.map(he=>({timestamp:he.timestamp,value:he.statusMetrics[i.field]})),visible:this._visibleInstances[D.id]})),l=D=>D.getMilliseconds()?Zt(":%S.%L")(D):D.getSeconds()?Zt(":%S")(D):D.getMinutes()||D.getHours()?Zt("%H:%M")(D):D.getDay()&&D.getDate()!==1?Zt("%a %d")(D):D.getDate()!==1?Zt("%b %d")(D):D.getMonth()?Zt("%B")(D):Zt("%Y")(D),u=document.getElementById("status-history-chart-container");u.replaceChildren(),u.setAttribute("height",this.getChartMinHeight()+"px");let c=u.clientWidth-r.left-r.right,f=u.clientHeight-r.top-r.bottom,S=Math.min(u.clientWidth,this.getChartMaxWidth());c>S&&(c=S);let x=this.getChartMaxHeight();f>x&&(f=x);let h=Ho().range([0,c]),p=Fo(h).ticks(5).tickFormat(l),m=Ro().range([f,0]),d=No(m).tickFormat(this.formatters[i.formatter]),y=Lo().curve($o).x(D=>h(D.timestamp)).y(D=>m(D.value)),_=Hi("#status-history-chart-container").append("svg").attr("style","pointer-events: none;").attr("width",u.clientWidth).attr("height",u.clientHeight),E=_.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",c).attr("height",f),w=_.append("g").attr("transform","translate("+r.left+", "+r.top+")"),A=xt(a,D=>xt(D.values,he=>he.timestamp)),R=Tt(a,D=>Tt(D.values,he=>he.timestamp));h.domain([A,R]),m.domain([this.getMinValue(a),this.getMaxValue(a)]),w.append("g").attr("class","x axis").attr("transform","translate(0, "+f+")").call(p),w.append("g").attr("class","y axis").call(d).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("text-anchor","end").text(i.label);let j=w.selectAll(".status").data(a).enter().append("g").attr("clip-path","url(#clip)").attr("class","status");j.append("path").attr("class",D=>"chart-line chart-line-"+D.id).attr("d",D=>y(D.values)).attr("stroke",D=>o(D.label)).classed("hidden",D=>D.visible===!1).append("title").text(D=>D.label),j.each((D,he,Y)=>{Hi(Y[he]).append("g").attr("class",function(){return"mark-group mark-group-"+D.id}).classed("hidden",function(ue){return ue.visible===!1}).selectAll("circle.mark").data(D.values).enter().append("circle").attr("style","pointer-events: all;").attr("class","mark").attr("cx",ue=>h(ue.timestamp)).attr("cy",ue=>m(ue.value)).attr("fill",()=>o(D.label)).attr("r",1.5).append("title").text(ue=>D.label+" -- "+this.formatters[i.formatter](ue.value))});let G=u.parentElement;G&&_.attr("width",G.clientWidth).attr("height",u.clientHeight),E.attr("width",c).attr("height",f),w.select(".x.axis").attr("transform","translate(0, "+f+")");let pe=document.getElementById("status-history-chart-control-container");pe.replaceChildren();let je=pe.clientHeight-r.top-r.bottom,we=Ho().range([0,c]),Je=Fo(we).ticks(5).tickFormat(l),Ne=Ro().range([je,0]),Mt=No(Ne).tickValues(m.domain()).tickFormat(this.formatters[i.formatter]),H=Lo().curve($o).x(function(D){return we(D.timestamp)}).y(function(D){return Ne(D.value)}),$=Hi("#status-history-chart-control-container").append("svg").attr("width",u.clientWidth).attr("height",pe.clientHeight).append("g").attr("transform","translate("+r.left+", "+r.top+")");we.domain(h.domain()),Ne.domain(m.domain()),$.append("g").attr("class","x axis").attr("transform","translate(0, "+je+")").call(Je),$.append("g").attr("class","y axis").call(Mt),$.selectAll(".status").data(a).enter().append("g").attr("class","status").append("path").attr("class",D=>"chart-line chart-line-"+D.id).attr("d",D=>H(D.values)).attr("stroke",D=>o(D.label)).classed("hidden",D=>this.visibleInstances[D.id]===!1).append("title").text(function(D){return D.label});let _e=()=>{let D=h.domain(),he=m.domain(),Y=a.map(ae=>{let Cn=ae.values.filter(It=>It.timestamp>=D[0].getTime()&&It.timestamp<=D[1]&&It.value>=he[0]&&It.value<=he[1]);return N(k({},ae),{values:Cn})}),be=Y.filter(ae=>ae.id!==ct.nifiInstanceId&&ae.visible&&ae.values.length>0),ue=be.length===0?"NA":this.formatters[i.formatter](this.getMinValue(be)),ut=be.length===0?"NA":this.formatters[i.formatter](this.getMeanValue(be)),mt=be.length===0?"NA":this.formatters[i.formatter](this.getMaxValue(be));this.nodeStats$.next({min:ue,max:mt,mean:ut,nodes:be.map(ae=>({id:ae.id,label:ae.label,color:o(ae.label)}))});let et=Y.filter(ae=>ae.id===ct.nifiInstanceId&&ae.visible&&ae.values.length>0),vn=et.length===0?"NA":this.formatters[i.formatter](this.getMinValue(et)),Sn=et.length===0?"NA":this.formatters[i.formatter](this.getMeanValue(et)),Ue=et.length===0?"NA":this.formatters[i.formatter](this.getMaxValue(et));this.clusterStats$.next({min:vn,max:Ue,mean:Sn,nodes:et.map(ae=>({id:ae.id,label:ae.label,color:o(ae.label)}))})},Be=(D,he)=>{h.domain(D),m.domain(he),j.selectAll(".chart-line").attr("d",Y=>y(Y.values)),j.selectAll("circle.mark").attr("cx",Y=>h(Y.timestamp)).attr("cy",Y=>m(Y.value)).attr("r",function(){return Oo(se.node())===null?1.5:4}),w.select(".x.axis").call(p),w.select(".y.axis").call(d)},ke=()=>{this.brushSelection=Oo(se.node());let D,he;if(this.brushSelection===null){let Y=a.filter(be=>be.visible);Y.length===0?he=Ne.domain():he=[xt(Y,be=>xt(be.values,ue=>ue.value)),Tt(Y,be=>Tt(be.values,ue=>ue.value))],D=we.domain()}else D=[this.brushSelection[0][0],this.brushSelection[1][0]].map(we.invert,we),he=[this.brushSelection[1][1],this.brushSelection[0][1]].map(Ne.invert,Ne);Be(D,he),_e()},Ie=mc().extent([[we.range()[0],Ne.range()[1]],[we.range()[1],Ne.range()[0]]]).on("brush",ke),se=$.append("g").attr("class","brush").on("click",ke).call(Ie);this.brushSelection&&(Ie=Ie.move(se,this.brushSelection)),$.select("rect.selection").attr("style","pointer-events: all;").on("dblclick",()=>{if(this.brushSelection!==null){let D=Ne.range();Ie.move(se,[[this.brushSelection[0][0],D[1]],[this.brushSelection[1][0],D[0]]])}}),this.nodes=a.filter(D=>D.id!==ct.nifiInstanceId).sort((D,he)=>D.label<he.label?-1:D.label>he.label?1:0),ke()}getChartMinHeight(){let i=document.getElementById("status-history-chart-container"),r=document.getElementById("status-history-chart-control-container"),o=r.computedStyleMap().get("margin-top");return i.parentElement.clientHeight-r.clientHeight-parseInt(o.value,10)}getChartMaxHeight(){let i=document.getElementById("status-history-chart-control-container"),r=i.computedStyleMap().get("margin-top"),s=document.getElementsByClassName("status-history")[0].getElementsByClassName("status-history-dialog-content")[0],a=document.getElementsByClassName("selected-descriptor-container")[0],l=s.computedStyleMap();return document.body.getBoundingClientRect().height-i.clientHeight-a.clientHeight-parseInt(r.value,10)-parseInt(l.get("top")?.value)-parseInt(l.get("bottom")?.value)}getChartMaxWidth(){let i=document.getElementsByClassName("status-history")[0],o=i.getElementsByClassName("status-history-dialog-content")[0].computedStyleMap(),s=i.computedStyleMap();return document.body.getBoundingClientRect().width-i.clientWidth-parseInt(s.get("left")?.value,10)-parseInt(o.get("left")?.value)-parseInt(o.get("right")?.value)}getMinValue(i){return xt(i,r=>xt(r.values,o=>o.value))}getMaxValue(i){return Tt(i,r=>Tt(r.values,o=>o.value))}getMeanValue(i){let r=0;return Po(i,s=>(r+=s.values.length,Po(s.values,a=>a.value)))/r}};e.\u0275fac=function(r){return new(r||e)(ee($e))},e.\u0275cmp=Ae({type:e,selectors:[["status-history-chart"]],inputs:{instances:"instances",selectedFieldDescriptor:"selectedFieldDescriptor",visibleInstances:"visibleInstances"},outputs:{nodeStats:"nodeStats",clusterStats:"clusterStats"},standalone:!0,features:[Me],decls:3,vars:0,consts:[["id","status-history-container",1,"flex-1","flex","flex-col","select-none"],["id","status-history-chart-container",1,"grow"],["id","status-history-chart-control-container"]],template:function(r,o){r&1&&(v(0,"div",0),X(1,"div",1)(2,"div",2),g())}});let n=e;return n})();var rm=n=>({color:n});function yf(n,e){n&1&&(v(0,"div",6),X(1,"ngx-skeleton-loader",11),g())}function vf(n,e){if(n&1&&(v(0,"div",14)(1,"div"),C(2),g(),v(3,"div",24),C(4),g()()),n&2){let t=L().$implicit;b(2),Ce(t.key),b(),q("title",t.value),b(),te(" ",t.value," ")}}function Sf(n,e){if(n&1&&K(0,vf,5,3,"div",14),n&2){let t=e.$implicit;W(0,t.key&&t.value?0:-1)}}function Cf(n,e){if(n&1){let t=De();v(0,"div",25)(1,"mat-checkbox",26),oe("change",function(r){le(t);let o=L(7);return ce(o.selectNode(r))}),g(),v(2,"mat-label",20),C(3),g()()}if(n&2){let t=L().$implicit,i=L(6);b(),q("value",t.id)("checked",!!i.instanceVisibility[t.id]),b(),q("ngStyle",oi(4,rm,i.getColor(i.nodeStats,t.id))),b(),Ce(t.label)}}function _f(n,e){if(n&1&&K(0,Cf,4,6,"div",25),n&2){let t=e.$implicit;W(0,t.snapshots!=null&&t.snapshots.length?0:-1)}}function bf(n,e){if(n&1&&(v(0,"div",14)(1,"div"),C(2,"Nodes"),g(),v(3,"div")(4,"div"),C(5,"Min / Max / Mean"),g(),v(6,"div",15),C(7),g()(),v(8,"div",18),$t(9,_f,1,1,null,null,Lt),g()()),n&2){let t=L(5);b(7),ri(" ",t.nodeStats.min," / ",t.nodeStats.max," / ",t.nodeStats.mean," "),b(2),Vt(t.nodes)}}function Ef(n,e){if(n&1&&(v(0,"mat-option",28)(1,"span",29),C(2),g()()),n&2){let t=L().$implicit,i=L(6);q("value",t)("tooltipComponentType",i.TextTip)("tooltipInputData",t.description)("delayClose",!1),b(2),Ce(t.label)}}function Tf(n,e){if(n&1&&(v(0,"mat-option",30)(1,"span",29),C(2),g()()),n&2){let t=L().$implicit;q("value",t),b(2),Ce(t.label)}}function xf(n,e){if(n&1&&K(0,Ef,3,5,"mat-option",28)(1,Tf,3,2),n&2){let t=e.$implicit;W(0,t.description?0:1)}}function wf(n,e){if(n&1&&(v(0,"div",22)(1,"mat-form-field")(2,"mat-select",27),$t(3,xf,2,1,null,null,Lt),g()()()),n&2){let t=L(5);b(3),Vt(t.fieldDescriptors)}}function Af(n,e){if(n&1){let t=De();v(0,"div",12)(1,"div",13),$t(2,Sf,1,1,null,null,Lt),v(4,"div",14)(5,"div"),C(6,"Start"),g(),v(7,"div",15),C(8),g()(),v(9,"div",14)(10,"div"),C(11,"End"),g(),v(12,"div",15),C(13),g()(),v(14,"div",14)(15,"div",16),C(16,"NiFi"),g(),v(17,"div",17)(18,"div"),C(19,"Min / Max / Mean"),g(),v(20,"div",15),C(21),g()(),v(22,"div",18)(23,"mat-checkbox",19),oe("change",function(r){le(t);let o=L(4);return ce(o.selectNode(r))}),g(),v(24,"mat-label",20),C(25,"NiFi"),g()()(),K(26,bf,11,3,"div",14),g(),v(27,"div",21),K(28,wf,5,0,"div",22),Re(29,"async"),v(30,"status-history-chart",23),oe("nodeStats",function(r){le(t);let o=L(4);return ce(o.nodeStatsChanged(r))})("clusterStats",function(r){le(t);let o=L(4);return ce(o.clusterStatsChanged(r))}),g()()()}if(n&2){let t=L(4);b(2),Vt(t.details),b(6),te(" ",t.minDate," "),b(5),te(" ",t.maxDate," "),b(8),ri(" ",t.clusterStats.min," / ",t.clusterStats.max," / ",t.clusterStats.mean," "),b(2),q("checked",!!t.instanceVisibility["nifi-instance-id"]),b(),q("ngStyle",oi(14,rm,t.getColor(t.nodeStats,t.NIFI_NODE_CONFIG.nifiInstanceId))),b(2),W(26,t.nodes&&t.nodes.length>0?26:-1),b(2),W(28,He(29,12,t.fieldDescriptors$)?28:-1),b(2),q("instances",t.instances)("visibleInstances",t.instanceVisibility)("selectedFieldDescriptor",t.selectedDescriptor)}}function Df(n,e){if(n&1&&(K(0,Af,31,16,"div",12),Re(1,"async")),n&2){let t,i=L(3);W(0,(t=He(1,1,i.componentDetails$))?0:-1,t)}}function kf(n,e){n&1&&(v(0,"div",31),C(1," Insufficient history, please try again later. "),g())}function Mf(n,e){if(n&1&&K(0,Df,2,3)(1,kf,2,0),n&2){let t=L(2);W(0,t.instances.length>0&&t.fieldDescriptors.length>0?0:1)}}function If(n,e){if(n&1){let t=De();v(0,"div",9)(1,"button",32),oe("click",function(){le(t);let r=L(2);return ce(r.refresh())}),X(2,"i",33),g(),v(3,"div"),C(4,"Last updated:"),g(),v(5,"div",15),C(6),g()()}if(n&2){let t=L();b(2),pt("fa-spin",t.status==="loading"),b(4),te(" ",t.loadedTimestamp," ")}}function Pf(n,e){if(n&1&&(v(0,"h2",1),C(1,"Status History"),g(),X(2,"error-banner"),v(3,"div",2)(4,"mat-dialog-content",3)(5,"form",4)(6,"div",5),K(7,yf,2,0,"div",6)(8,Mf,2,1),g()()(),v(9,"mat-dialog-actions",7)(10,"div",8)(11,"div",6),K(12,If,7,3,"div",9),g(),v(13,"div")(14,"button",10),C(15,"Close"),g()()()()()),n&2){let t=L();b(5),q("formGroup",t.statusHistoryForm),b(2),W(7,t.isInitialLoading(e)?7:8),b(5),W(12,t.instances.length>0&&t.fieldDescriptors.length>0?12:-1)}}var om=(()=>{let e=class e extends bt{constructor(i,r,o,s,a){super(),this.statusHistoryService=i,this.store=r,this.formBuilder=o,this.nifiCommon=s,this.dialogRequest=a,this.statusHistoryState$=this.store.select(Fs),this.componentDetails$=this.store.select(tm),this.statusHistory$=this.store.select(oo),this.fieldDescriptors$=this.store.select(im),this.fieldDescriptors=[],this.details=[],this.minDate="",this.maxDate="",this.nodeStats={max:"NA",min:"NA",mean:"NA",nodes:[]},this.clusterStats={max:"NA",min:"NA",mean:"NA",nodes:[]},this.nodes=[],this.instances=[],this.instanceVisibility={},this.selectedDescriptor=null,this.destroyRef=Se(Si),this.Object=Object,this.TextTip=qt,this.NIFI_NODE_CONFIG=ct,this.request=a,this.statusHistoryForm=this.formBuilder.group({fieldDescriptor:""})}ngOnInit(){this.statusHistory$.pipe(fe(i=>!!i),ze(this.destroyRef)).subscribe(i=>{if(i){this.instances=[],i.statusHistory?.aggregateSnapshots?.length>1&&(this.instances.push({id:ct.nifiInstanceId,label:ct.nifiInstanceLabel,snapshots:i.statusHistory.aggregateSnapshots}),this.instanceVisibility[ct.nifiInstanceId]===void 0&&(this.instanceVisibility[ct.nifiInstanceId]=!0)),i.statusHistory?.nodeSnapshots&&i.statusHistory?.nodeSnapshots.length>1&&i.statusHistory.nodeSnapshots.forEach(s=>{this.instances.push({id:s.nodeId,label:`${s.address}:${s.apiPort}`,snapshots:s.statusSnapshots}),this.instanceVisibility[s.nodeId]===void 0&&(this.instanceVisibility[s.nodeId]=!0)}),this.nodes=this.instances.filter(s=>s.id!==ct.nifiInstanceId).sort((s,a)=>s.label<a.label?-1:s.label>a.label?1:0);let r=xt(this.instances,s=>xt(s.snapshots,a=>a.timestamp)),o=Tt(this.instances,s=>Tt(s.snapshots,a=>a.timestamp));this.minDate=this.nifiCommon.formatDateTime(new Date(r)),this.maxDate=this.nifiCommon.formatDateTime(new Date(o))}}),this.fieldDescriptors$.pipe(fe(i=>!!i),Oe(1)).subscribe(i=>{this.fieldDescriptors=i,this.statusHistoryForm.get("fieldDescriptor")?.setValue(i[0]),this.selectedDescriptor=i[0]}),this.componentDetails$.pipe(ye(),Oe(1)).subscribe(i=>{this.details=Object.entries(i).map(r=>({key:r[0],value:r[1]}))})}ngOnDestroy(){this.store.dispatch(Ei())}ngAfterViewInit(){this.statusHistoryForm.get("fieldDescriptor")?.valueChanges.pipe(ze(this.destroyRef)).subscribe(i=>{this.instances.length>0&&(this.selectedDescriptor=i)})}isInitialLoading(i){return i.loadedTimestamp===yn.loadedTimestamp}refresh(){this.store.dispatch(ci({request:this.request}))}clusterStatsChanged(i){this.clusterStats=i}nodeStatsChanged(i){this.nodeStats=i}selectNode(i){let r=i.source.value,o=i.checked,s=uc("path.chart-line-"+r),a=Hi("g.mark-group-"+r),l=a.classed("hidden");s.classed("hidden",()=>!l),a.classed("hidden",()=>!l),this.instanceVisibility=N(k({},this.instanceVisibility),{[r]:o})}resized(){this.selectedDescriptor&&(this.selectedDescriptor=k({},this.selectedDescriptor))}getColor(i,r){if(i.nodes&&i.nodes.length>0){let o=i.nodes?.find(s=>s.id===r);if(o)return o.color}return"unset surface-color"}};e.\u0275fac=function(r){return new(r||e)(ee(ro),ee(ne),ee(St),ee($e),ee(ki))},e.\u0275cmp=Ae({type:e,selectors:[["status-history"]],standalone:!0,features:[it,Me],decls:3,vars:6,consts:[["resizable","",1,"flex","flex-col","status-history-container",3,"resized","resizeDisabled","minHeight","minWidth"],["mat-dialog-title",""],[1,"status-history","flex","flex-col","grow"],[1,"grow","flex","flex-1"],[1,"flex","flex-1","h-full",3,"formGroup"],[1,"status-history-dialog-content","flex","w-full","flex-1"],[1,"flex-1"],["align","start"],[1,"flex","w-full"],[1,"text-sm","flex","items-center","gap-x-2"],["mat-button","","mat-dialog-close",""],["count","3"],[1,"flex","flex-1","w-full","gap-x-4"],[1,"component-details","flex","flex-col","gap-y-3"],[1,"flex","flex-col"],[1,"accent-color","font-medium"],[1,"font-bold"],[1,"detail-item"],[1,"legend-entry"],["color","primary","value","nifi-instance-id",3,"change","checked"],[3,"ngStyle"],[1,"chart-panel","grow","flex","flex-col"],[1,"selected-descriptor-container"],[1,"flex","flex-1","flex-col",3,"nodeStats","clusterStats","instances","visibleInstances","selectedFieldDescriptor"],[1,"accent-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"],[1,"flex"],["color","primary",3,"change","value","checked"],["formControlName","fieldDescriptor"],["nifiTooltip","",3,"value","tooltipComponentType","tooltipInputData","delayClose"],[1,"option-text"],[3,"value"],[1,"grow","flex","items-center","justify-center"],["mat-icon-button","","color","primary",3,"click"],[1,"fa","fa-refresh"]],template:function(r,o){if(r&1&&(v(0,"div",0),oe("resized",function(){return o.resized()}),K(1,Pf,16,3),Re(2,"async"),g()),r&2){let s;q("resizeDisabled",o.instances.length===0||o.fieldDescriptors.length===0)("minHeight",720)("minWidth",887),b(),W(1,(s=He(2,4,o.statusHistoryState$))?1:-1,s)}},dependencies:[_t,qe,Ke,We,Ge,dt,Qt,Ve,Wt,dl,pl,rt,gt,ft,ht,yt,vt,Di,Ai,wi,Ql,Wl,nl,Kt,Dl,qn,Sr,nm,ga,Fi],styles:[`.status-history-container[_ngcontent-%COMP%]{position:relative;resize:both;max-width:80vw;max-height:84vh}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{max-height:unset}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .status-history-svg[_ngcontent-%COMP%]{pointer-events:none}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]{min-width:495px}.status-history-container[_ngcontent-%COMP%]   .status-history[_ngcontent-%COMP%]   .component-details[_ngcontent-%COMP%]{min-width:300px;max-width:300px}[_nghost-%COMP%]     #status-history-chart-container, [_nghost-%COMP%]     #status-history-chart-control-container{overflow:hidden;cursor:default}[_nghost-%COMP%]     #status-history-chart-container .axis path, [_nghost-%COMP%]     #status-history-chart-container .axis line, [_nghost-%COMP%]     #status-history-chart-control-container .axis path, [_nghost-%COMP%]     #status-history-chart-control-container .axis line{fill:none;shape-rendering:crispEdges}[_nghost-%COMP%]     #status-history-chart-container .chart-area, [_nghost-%COMP%]     #status-history-chart-control-container .chart-area{clip-path:url(#clip)}[_nghost-%COMP%]     #status-history-chart-container .chart-line, [_nghost-%COMP%]     #status-history-chart-control-container .chart-line{fill:none;stroke-width:1.5px}[_nghost-%COMP%]     #status-history-chart-container .chart-line.over, [_nghost-%COMP%]     #status-history-chart-control-container .chart-line.over{stroke-width:2.5px}[_nghost-%COMP%]     #status-history-chart-container .brush .selection, [_nghost-%COMP%]     #status-history-chart-control-container .brush .selection{fill-opacity:.125;shape-rendering:crispEdges}[_nghost-%COMP%]     #status-history-chart-container{height:372px;cursor:default;overflow:hidden}[_nghost-%COMP%]     #status-history-chart-control-container{height:125px;margin-top:5px;cursor:default;overflow:hidden}[_nghost-%COMP%]     #status-history-chart-container text, #status-history-chart-control-container[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-size:10px}[_nghost-%COMP%]     .mat-mdc-dialog-surface.mdc-dialog__surface{overflow:hidden!important}
















`]});let n=e;return n})();var sm=(()=>{let e=class e{constructor(i,r,o,s,a){this.actions$=i,this.store=r,this.statusHistoryService=o,this.dialog=s,this.errorHelper=a,this.reloadComponentStatusHistory$=O(()=>this.actions$.pipe(F(ci),I(l=>l.request),fe(l=>!!l.componentId&&!!l.componentType),P(l=>Q(this.statusHistoryService.getComponentStatusHistory(l.componentType,l.componentId).pipe(I(u=>Ki({response:{statusHistory:{canRead:u.canRead,statusHistory:u.statusHistory}}})),z(u=>this.bannerOrFullScreenError(u))))))),this.reloadNodeStatusHistory$=O(()=>this.actions$.pipe(F(ci),I(l=>l.request),fe(l=>!l.componentId&&!l.componentType),P(()=>Q(this.statusHistoryService.getNodeStatusHistory().pipe(I(l=>Ki({response:{statusHistory:{canRead:l.canRead,statusHistory:l.statusHistory}}})),z(l=>this.bannerOrFullScreenError(l))))))),this.getStatusHistoryAndOpenDialog$=O(()=>this.actions$.pipe(F($n),I(l=>l.request),P(l=>Q(this.statusHistoryService.getComponentStatusHistory(l.componentType,l.componentId).pipe(I(u=>Mi({request:l,response:{statusHistory:{canRead:u.canRead,statusHistory:u.statusHistory}}})),z(u=>this.snackBarOrFullScreenError(u))))))),this.getNodeStatusHistoryAndOpenDialog$=O(()=>this.actions$.pipe(F(Tl),I(l=>l.request),P(l=>Q(this.statusHistoryService.getNodeStatusHistory().pipe(I(u=>Mi({request:l,response:{statusHistory:{canRead:u.canRead,statusHistory:u.statusHistory}}})),z(u=>this.snackBarOrFullScreenError(u))))))),this.loadStatusHistorySuccess$=O(()=>this.actions$.pipe(F(Mi),I(l=>l.request),P(l=>M(bo({request:l}))))),this.openStatusHistoryDialog$=O(()=>this.actions$.pipe(F(bo),I(l=>l.request),me(l=>{this.dialog.open(om,{maxHeight:"unset",maxWidth:"unset",data:l}).afterClosed().subscribe(c=>{c!=="ROUTED"&&("componentType"in l?this.store.dispatch(Vn({request:{source:l.source,componentType:l.componentType,componentId:l.componentId}})):this.store.dispatch(jn({request:{source:l.source}})))})})),{dispatch:!1}),this.statusHistoryBannerError$=O(()=>this.actions$.pipe(F(Gi),I(l=>l.error),P(l=>M(si({error:l})))))}bannerOrFullScreenError(i){if(this.errorHelper.showErrorInContext(i.status)){let r=this.errorHelper.getErrorString(i,"Failed to reload Status History.");return M(Gi({error:r}))}else return M(this.errorHelper.fullScreenError(i))}snackBarOrFullScreenError(i){if(this.errorHelper.showErrorInContext(i.status)){let r=this.errorHelper.getErrorString(i,"Failed to load Status History.");return M(Te({error:r}))}else return M(this.errorHelper.fullScreenError(i))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(ne),T(ro),T(Pe),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var am=(()=>{let e=class e{constructor(i,r,o,s){this.httpClient=i,this.nifiCommon=r,this.client=o,this.clusterConnectionService=s}getControllerService(i){let r={uiOnly:!0};return this.httpClient.get(`${e.API}/controller-services/${i}`,{params:r})}setEnable(i,r){return this.httpClient.put(`${this.nifiCommon.stripProtocol(i.uri)}/run-status`,{revision:this.client.getRevision(i),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:r?"ENABLED":"DISABLED",uiOnly:!0})}updateReferencingServices(i,r){let o={};return this.getReferencingComponentRevisions(i.component.referencingComponents,o,!0),this.httpClient.put(`${this.nifiCommon.stripProtocol(i.uri)}/references`,{id:i.id,state:r?"ENABLED":"DISABLED",referencingComponentRevisions:o,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),uiOnly:!0})}updateReferencingSchedulableComponents(i,r){let o={};return this.getReferencingComponentRevisions(i.component.referencingComponents,o,!1),this.httpClient.put(`${this.nifiCommon.stripProtocol(i.uri)}/references`,{id:i.id,state:r?"RUNNING":"STOPPED",referencingComponentRevisions:o,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),uiOnly:!0})}getReferencingComponentRevisions(i,r,o){this.nifiCommon.isEmpty(i)||i.forEach(s=>{let a=s.component;o?a.referenceType==="ControllerService"&&(r[a.id]=this.client.getRevision(s)):(a.referenceType==="Processor"||a.referenceType==="ReportingTask")&&(r[a.id]=this.client.getRevision(s)),this.getReferencingComponentRevisions(a.referencingComponents,r,o)})}};e.API="../nifi-api",e.\u0275fac=function(r){return new(r||e)(T(Le),T($e),T(Yt),T(ql))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var lm=(()=>{let e=class e{constructor(i,r,o,s,a){this.actions$=i,this.store=r,this.dialog=o,this.controllerServiceStateService=s,this.errorHelper=a,this.submitEnableRequest$=O(()=>this.actions$.pipe(F(Cr),I(l=>l.request),xe(()=>this.store.select(mi).pipe(ye())),P(([l,u])=>l.scope==="SERVICE_AND_REFERENCING_COMPONENTS"&&this.hasUnauthorizedReferences(u.component.referencingComponents)?M(Et({response:{step:de.EnableService,error:"Unable to enable due to unauthorized referencing components."}})):M(br())))),this.submitDisableRequest$=O(()=>this.actions$.pipe(F(_r),xe(()=>this.store.select(mi).pipe(ye())),P(([,l])=>this.hasUnauthorizedReferences(l.component.referencingComponents)?M(Et({response:{step:de.StopReferencingComponents,error:"Unable to disable due to unauthorized referencing components."}})):M(Tr())))),this.setEnableControllerService$=O(()=>this.actions$.pipe(F(br),xe(()=>[this.store.select(mi).pipe(ye()),this.store.select(sn)]),P(([,l,u])=>Q(this.controllerServiceStateService.setEnable(l,u.enable)).pipe(I(c=>nn({response:{controllerService:c,currentStep:u.currentStep}})),z(c=>M(Et({response:{step:u.currentStep,error:this.errorHelper.getErrorString(c)}}))))))),this.setEnableControllerServiceSuccess$=O(()=>this.actions$.pipe(F(nn),I(l=>l.response),fe(l=>l.currentStep!==de.DisableService),P(()=>M(xr())))),this.startPollingControllerService$=O(()=>this.actions$.pipe(F(xr),P(()=>Ot(2e3,Nt).pipe(Fe(this.actions$.pipe(F(wr))))),P(()=>M(Ao())))),this.pollControllerService$=O(()=>this.actions$.pipe(F(Ao),xe(()=>[this.store.select(mi).pipe(ye()),this.store.select(sn)]),P(([,l,u])=>Q(this.controllerServiceStateService.getControllerService(l.id)).pipe(I(c=>on({response:{controllerService:c,currentStep:this.getNextStep(u,l)},previousStep:u.currentStep})),z(c=>M(Et({response:{step:u.currentStep,error:this.errorHelper.getErrorString(c)}}))))))),this.setEnableStepComplete$=O(()=>this.actions$.pipe(F(on),fe(l=>{let u=l.response,c=l.previousStep;return u.currentStep!==c}),P(l=>{switch(l.response.currentStep){case de.DisableReferencingServices:case de.EnableReferencingServices:return M(wo());case de.DisableService:case de.EnableService:return M(br());case de.StopReferencingComponents:case de.StartReferencingComponents:return M(Tr());case de.Completed:default:return M(wr())}}))),this.updateReferencingServices$=O(()=>this.actions$.pipe(F(wo),xe(()=>[this.store.select(mi),this.store.select(sn)]),P(([,l,u])=>l?Q(this.controllerServiceStateService.updateReferencingServices(l,u.enable)).pipe(I(c=>Er({response:{referencingComponents:c.controllerServiceReferencingComponents,currentStep:u.currentStep}})),z(c=>M(Et({response:{step:u.currentStep,error:this.errorHelper.getErrorString(c)}})))):M(Ar({title:"Enable Service",message:"Controller Service not initialized"}))))),this.updateReferencingComponents$=O(()=>this.actions$.pipe(F(Tr),xe(()=>[this.store.select(mi),this.store.select(sn)]),P(([,l,u])=>l?Q(this.controllerServiceStateService.updateReferencingSchedulableComponents(l,u.enable)).pipe(I(c=>rn({response:{referencingComponents:c.controllerServiceReferencingComponents,currentStep:u.currentStep}})),z(c=>M(Et({response:{step:u.currentStep,error:this.errorHelper.getErrorString(c)}})))):M(Ar({title:"Enable Service",message:"Controller Service not initialized"}))))),this.updateReferencingComponentsSuccess$=O(()=>this.actions$.pipe(F(rn),I(l=>l.response),fe(l=>l.currentStep!==de.StartReferencingComponents),P(()=>M(xr())))),this.setEnableStepFailure$=O(()=>this.actions$.pipe(F(Et),P(()=>M(wr())))),this.showOkDialog$=O(()=>this.actions$.pipe(F(Ar),me(l=>{this.dialog.open(Hn,N(k({},Gt),{data:{title:l.title,message:l.message}}))})),{dispatch:!1})}hasUnauthorizedReferences(i){if(i.length===0)return!1;if(i.some(s=>!s.permissions.canRead||!s.permissions.canWrite))return!0;let o=i.filter(s=>s.component.referenceType==="ControllerService");return o.length===0?!1:o.some(s=>this.hasUnauthorizedReferences(s.component.referencingComponents))}getNextStep(i,r){switch(i.currentStep){case de.EnableService:return this.isServiceActionComplete(r,["ENABLED","ENABLING"])?i.scope==="SERVICE_ONLY"?de.Completed:de.EnableReferencingServices:i.currentStep;case de.EnableReferencingServices:return this.isReferencingServicesActionComplete(r.component.referencingComponents,["ENABLED","ENABLING"])?de.StartReferencingComponents:i.currentStep;case de.StartReferencingComponents:return de.Completed;case de.StopReferencingComponents:return this.areReferencingComponentsStopped(r.component.referencingComponents)?de.DisableReferencingServices:i.currentStep;case de.DisableReferencingServices:return this.isReferencingServicesActionComplete(r.component.referencingComponents,["DISABLED"])?de.DisableService:i.currentStep;case de.DisableService:return this.isServiceActionComplete(r,["DISABLED"])?de.Completed:i.currentStep;default:return i.currentStep}}isServiceActionComplete(i,r){return r.includes(i.status.runStatus)}isReferencingServicesActionComplete(i,r){let o=i.filter(s=>s.component.referenceType==="ControllerService");return o.length===0?!0:o.some(s=>{let a=r.includes(s.component.state);return a&&this.isReferencingServicesActionComplete(s.component.referencingComponents,r)})}areReferencingComponentsStopped(i){if(i.filter(a=>a.component.referenceType==="Processor"||a.component.referenceType==="ReportingTask").some(a=>{let l=a.component;return l.state==="RUNNING"||l.activeThreadCount&&l.activeThreadCount>0}))return!1;let s=i.filter(a=>a.component.referenceType==="ControllerService");return s.length===0?!0:s.some(a=>this.areReferencingComponentsStopped(a.component.referencingComponents))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(ne),T(Pe),T(am),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var cm=(()=>{let e=class e{constructor(i,r){this.httpClient=i,this.client=r}getSystemDiagnostics(i){if(i){let r={nodewise:!0};return this.httpClient.get(`${e.API}/system-diagnostics`,{params:r})}return this.httpClient.get(`${e.API}/system-diagnostics`)}};e.API="../nifi-api",e.\u0275fac=function(r){return new(r||e)(T(Le),T(Yt))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Of(n,e){if(n&1&&(v(0,"div",9)(1,"div"),C(2),g(),v(3,"div",10),C(4),g()()),n&2){let t=e.$implicit;b(2),Ce(t.name),b(2),Ci(" ",t.collectionCount," times (",t.collectionTime,") ")}}function Rf(n,e){if(n&1&&(v(0,"div",8),$t(1,Of,5,3,"div",9,Lt),g()),n&2){let t=L(2);b(),Vt(t.sortedGarbageCollections)}}function Hf(n,e){if(n&1&&(v(0,"div")(1,"div",17),C(2),g(),X(3,"mat-progress-bar",18),v(4,"div",10),C(5),g()()),n&2){let t=e.$implicit,i=L(2);b(2),te("Usage for ",t.identifier,":"),b(),q("value",i.getRepositoryStorageUsagePercent(t)),b(2),ri(" ",t.utilization," (",t.usedSpace," of ",t.totalSpace,") ")}}function Lf(n,e){if(n&1&&(v(0,"div")(1,"div",17),C(2),g(),X(3,"mat-progress-bar",18),v(4,"div",10),C(5),g()()),n&2){let t=e.$implicit,i=L(2);b(2),te("Usage for ",t.identifier,":"),b(),q("value",i.getRepositoryStorageUsagePercent(t)),b(2),ri(" ",t.utilization," (",t.usedSpace," of ",t.totalSpace,") ")}}function $f(n,e){if(n&1){let t=De();v(0,"h2",0),C(1,"System Diagnostics"),g(),X(2,"error-banner"),v(3,"div",1)(4,"mat-tab-group",2),pa("selectedIndexChange",function(r){le(t);let o=L();return ma(o.selectedIndex,r)||(o.selectedIndex=r),ce(r)}),oe("selectedIndexChange",function(r){le(t);let o=L();return ce(o.tabChanged(r))}),v(5,"mat-tab",3)(6,"mat-dialog-content")(7,"div",4)(8,"div",5)(9,"div",6)(10,"section")(11,"div",7),C(12),g(),v(13,"div",8)(14,"div",9)(15,"div"),C(16,"Max"),g(),v(17,"div",10),C(18),g()(),v(19,"div",9)(20,"div"),C(21,"Total"),g(),v(22,"div",10),C(23),g()(),v(24,"div",9)(25,"div"),C(26,"Used"),g(),v(27,"div",10),C(28),g()(),v(29,"div",9)(30,"div"),C(31,"Free"),g(),v(32,"div",10),C(33),g()()()(),v(34,"section")(35,"div",7),C(36,"Garbage Collection"),g(),K(37,Rf,3,0,"div",8),g()(),v(38,"div",6)(39,"section")(40,"div",7),C(41,"Non Heap"),g(),v(42,"div",8)(43,"div",9)(44,"div"),C(45,"Max"),g(),v(46,"div",10),C(47),g()(),v(48,"div",9)(49,"div"),C(50,"Total"),g(),v(51,"div",10),C(52),g()(),v(53,"div",9)(54,"div"),C(55,"Used"),g(),v(56,"div",10),C(57),g()(),v(58,"div",9)(59,"div"),C(60,"Free"),g(),v(61,"div",10),C(62),g()()()(),v(63,"section")(64,"div",7),C(65,"Runtime"),g(),v(66,"div",8)(67,"div",9)(68,"div"),C(69,"Uptime"),g(),v(70,"div",10),C(71),g()()()()()()()()(),v(72,"mat-tab",11)(73,"mat-dialog-content")(74,"div",12)(75,"div",13)(76,"div",6)(77,"div",8)(78,"div",9)(79,"div"),C(80,"Available Cores"),g(),v(81,"div",10),C(82),g()()()(),v(83,"div",6)(84,"div",8)(85,"div",9)(86,"div",14)(87,"div"),C(88,"Core Load Average"),g(),X(89,"i",15),g(),v(90,"div",10),C(91),g()()()()(),v(92,"section",16)(93,"div",7),C(94,"FlowFile Repository Usage"),g(),v(95,"div")(96,"div",17),C(97,"Usage:"),g(),X(98,"mat-progress-bar",18),v(99,"div",10),C(100),g()()(),v(101,"section",16)(102,"div",7),C(103,"Content Repository Usage"),g(),v(104,"div",19),$t(105,Hf,6,5,"div",null,Lt),g()(),v(107,"section",16)(108,"div",7),C(109,"Provenance Repository Usage"),g(),v(110,"div",19),$t(111,Lf,6,5,"div",null,Lt),g()()()()(),v(113,"mat-tab",20)(114,"mat-dialog-content")(115,"div",4)(116,"div",21)(117,"section")(118,"div",7),C(119,"NiFi"),g(),v(120,"dl",22)(121,"dt",23),C(122,"NiFi Version"),g(),v(123,"dd"),C(124),g(),v(125,"dt",23),C(126,"Tag"),g(),v(127,"dd"),C(128),g(),v(129,"dt",23),C(130,"Build Date/Time"),g(),v(131,"dd"),C(132),g(),v(133,"dt",23),C(134,"Branch"),g(),v(135,"dd"),C(136),g(),v(137,"dt",23),C(138,"Revision"),g(),v(139,"dd"),C(140),g()()(),v(141,"section")(142,"div",7),C(143,"Java"),g(),v(144,"dl",22)(145,"dt",23),C(146,"Version"),g(),v(147,"dd"),C(148),g(),v(149,"dt",23),C(150,"Vendor"),g(),v(151,"dd"),C(152),g()()(),v(153,"section")(154,"div",7),C(155,"Operating System"),g(),v(156,"dl",22)(157,"dt",23),C(158,"Name"),g(),v(159,"dd"),C(160),g(),v(161,"dt",23),C(162,"Version"),g(),v(163,"dd"),C(164),g(),v(165,"dt",23),C(166,"Architecture"),g(),v(167,"dd"),C(168),g()()()()()()()(),v(169,"mat-dialog-actions")(170,"div",24)(171,"div",25)(172,"button",26),oe("click",function(){le(t);let r=L();return ce(r.refreshSystemDiagnostics())}),X(173,"i",27),Re(174,"async"),g(),v(175,"div"),C(176,"Last updated:"),g(),v(177,"div",10),C(178),Re(179,"async"),g()(),v(180,"div")(181,"button",28),C(182,"Close"),g()()()()()}if(n&2){let t=e,i=L();b(4),ua("selectedIndex",i.selectedIndex),b(8),te(" Heap (",t.heapUtilization,") "),b(6),te(" ",t.maxHeap," "),b(5),te(" ",t.totalHeap," "),b(5),te(" ",t.usedHeap," "),b(5),te(" ",t.freeHeap," "),b(4),W(37,i.sortedGarbageCollections?37:-1),b(10),te(" ",t.maxNonHeap," "),b(5),te(" ",t.totalNonHeap," "),b(5),te(" ",t.usedNonHeap," "),b(5),te(" ",t.freeNonHeap," "),b(9),te(" ",t.uptime," "),b(11),te(" ",t.availableProcessors," "),b(7),q("tooltipComponentType",i.TextTip),b(2),te(" ",i.formatFloat(t.processorLoadAverage)," "),b(7),q("value",i.getRepositoryStorageUsagePercent(t.flowFileRepositoryStorageUsage)),b(2),ri(" ",t.flowFileRepositoryStorageUsage.utilization," (",t.flowFileRepositoryStorageUsage.usedSpace," of ",t.flowFileRepositoryStorageUsage.totalSpace,") "),b(5),Vt(t.contentRepositoryStorageUsage),b(6),Vt(t.provenanceRepositoryStorageUsage),b(13),Ce(t.versionInfo.niFiVersion),b(4),Ce(t.versionInfo.buildTag),b(4),Ce(t.versionInfo.buildTimestamp),b(4),Ce(t.versionInfo.buildBranch),b(4),Ce(t.versionInfo.buildRevision),b(8),Ce(t.versionInfo.javaVersion),b(4),Ce(t.versionInfo.javaVendor),b(8),Ce(t.versionInfo.osName),b(4),Ce(t.versionInfo.osVersion),b(4),Ce(t.versionInfo.osArchitecture),b(5),pt("fa-spin",He(174,32,i.status$)==="loading"),b(5),Ce(He(179,34,i.loadedTimestamp$))}}var mm=(()=>{let e=class e extends tc{constructor(i,r){super("system-diagnostics-selected-index"),this.store=i,this.nifiCommon=r,this.systemDiagnostics$=this.store.select(Sc),this.loadedTimestamp$=this.store.select(Cc),this.status$=this.store.select(_c),this.sortedGarbageCollections=null,this.TextTip=qt}ngOnInit(){this.systemDiagnostics$.pipe(ye()).subscribe(i=>{let r=i.aggregateSnapshot.garbageCollection.slice();r.sort((o,s)=>this.nifiCommon.compareString(o.name,s.name)),this.sortedGarbageCollections=r})}ngOnDestroy(){this.store.dispatch(Ei())}refreshSystemDiagnostics(){this.store.dispatch(Ii({request:{nodewise:!1,errorStrategy:"banner"}}))}formatFloat(i){return this.nifiCommon.formatFloat(i)}getRepositoryStorageUsagePercent(i){return i.usedSpaceBytes/i.totalSpaceBytes*100}};e.\u0275fac=function(r){return new(r||e)(ee(ne),ee($e))},e.\u0275cmp=Ae({type:e,selectors:[["system-diagnostics-dialog"]],standalone:!0,features:[it,Me],decls:2,vars:3,consts:[["mat-dialog-title",""],[1,"system-diagnostics"],[3,"selectedIndexChange","selectedIndex"],["label","JVM"],[1,"dialog-tab-content","w-full"],[1,"flex","gap-y-4"],[1,"flex","flex-col","flex-1","gap-y-4"],[1,"mat-body-strong","primary-color"],[1,"flex","flex-col","gap-y-3"],[1,"flex","flex-col"],[1,"accent-color","font-medium"],["label","System"],[1,"dialog-tab-content","gap-y-6","w-full","flex","flex-col"],[1,"flex"],[1,"flex","gap-x-3","items-center"],["nifiTooltip","","tooltipInputData","Core load average for the last minute. Not available on all platforms.",1,"fa","fa-info-circle",3,"tooltipComponentType"],[1,"flex","flex-col","pr-4"],[1,"capitalize"],["mode","determinate",3,"value"],[1,"repository-storage-container","flex","flex-col","gap-y-2"],["label","Version"],[1,"flex","flex-col","gap-y-4"],[1,"setting-attributes-list"],[1,"font-bold"],[1,"flex","flex-1","justify-between"],[1,"text-sm","flex","items-center","gap-x-2"],["mat-icon-button","","color","primary",3,"click"],[1,"fa","fa-refresh"],["mat-button","","mat-dialog-close",""]],template:function(r,o){if(r&1&&(K(0,$f,183,36),Re(1,"async")),r&2){let s;W(0,(s=(s=He(1,1,o.systemDiagnostics$))==null?null:s.aggregateSnapshot)?0:-1,s)}},dependencies:[nt,dt,zl,Bl,Ul,_t,qe,Ke,We,Ge,Qt,Ve,Wt,Kt,wc,Mr,Fi],styles:[`.system-diagnostics[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block}.system-diagnostics[_ngcontent-%COMP%]   .setting-attributes-list[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{float:left;clear:left;padding:0 .5em .2em 0}.system-diagnostics[_ngcontent-%COMP%]   .setting-attributes-list[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{margin-left:9em;padding-bottom:.2em}
















`]});let n=e;return n})();var pm=(()=>{let e=class e{constructor(i,r,o,s,a){this.actions$=i,this.store=r,this.systemDiagnosticsService=o,this.dialog=s,this.errorHelper=a,this.reloadSystemDiagnostics$=O(()=>this.actions$.pipe(F(Ii),I(l=>l.request),P(l=>Q(this.systemDiagnosticsService.getSystemDiagnostics(l.nodewise)).pipe(I(u=>Bn({response:{systemDiagnostics:u.systemDiagnostics}})),z(u=>{let c=this.errorHelper.getErrorString(u,"Failed to reload System Diagnostics.");return l.errorStrategy==="snackbar"?M(Pi({error:c})):M(Qi({error:c}))}))))),this.getSystemDiagnosticsAndOpenDialog$=O(()=>this.actions$.pipe(F(Un),I(l=>l.request),P(l=>Q(this.systemDiagnosticsService.getSystemDiagnostics(l.nodewise)).pipe(I(u=>Wi({response:{systemDiagnostics:u.systemDiagnostics}})),z(u=>M(Pi({error:this.errorHelper.getErrorString(u,"Failed to load System Diagnostics.")}))))))),this.loadSystemDiagnosticsSuccess$=O(()=>this.actions$.pipe(F(Wi),P(()=>M(Eo())))),this.openSystemDiagnosticsDialog$=O(()=>this.actions$.pipe(F(Eo),me(()=>{this.dialog.open(mm,k({},Pn)).afterClosed().subscribe(()=>{this.store.dispatch(zn())})})),{dispatch:!1}),this.systemDiagnosticsBannerError$=O(()=>this.actions$.pipe(F(Qi),I(l=>l.error),P(l=>M(si({error:l}))))),this.systemDiagnosticsSnackbarError$=O(()=>this.actions$.pipe(F(Pi),I(l=>l.error),P(l=>M(Te({error:l})))))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(ne),T(cm),T(Pe),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var dm=(()=>{let e=class e{constructor(i,r,o){this.actions$=i,this.flowConfigurationService=r,this.errorHelper=o,this.loadFlowConfiguration$=O(()=>this.actions$.pipe(F(kl),P(()=>Q(this.flowConfigurationService.getFlowConfiguration().pipe(I(s=>Ml({response:s})),z(s=>M(Te({error:this.errorHelper.getErrorString(s,"Failed to load Flow Configuration.")}))))))))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(yc),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var fm=(()=>{let e=class e{constructor(i,r){this.httpClient=i,this.nifiCommon=r}getComponentState(i){return this.httpClient.get(`${this.nifiCommon.stripProtocol(i.componentUri)}/state`)}clearComponentState(i){return this.httpClient.post(`${this.nifiCommon.stripProtocol(i.componentUri)}/state/clear-requests`,{})}};e.\u0275fac=function(r){return new(r||e)(T(Le),T($e))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ao=wn(no),hm=Dt(ao,n=>n.componentState),gm=Dt(ao,n=>n.componentName),Ns=Dt(ao,n=>n.componentUri),ym=Dt(ao,n=>n.canClear);var jf=n=>({value:n});function Bf(n,e){n&1&&(v(0,"div",3)(1,"div"),C(2,"Name"),g(),v(3,"div",4),C(4),g()()),n&2&&(b(4),Ce(e))}function Uf(n,e){if(n&1){let t=De();v(0,"div")(1,"a",25),oe("click",function(){le(t);let r=L(2);return ce(r.clearState())}),C(2,"Clear state"),g()()}}function zf(n,e){if(n&1&&K(0,Uf,3,0,"div"),n&2){let t=L();W(0,e.value&&t.totalEntries>0?0:-1)}}function qf(n,e){n&1&&(v(0,"th",26),C(1,"Key"),g())}function Kf(n,e){if(n&1&&(v(0,"td",27),C(1),g()),n&2){let t=e.$implicit;b(),te(" ",t.key," ")}}function Gf(n,e){n&1&&(v(0,"th",26),C(1,"Value"),g())}function Wf(n,e){if(n&1&&(v(0,"td",28),C(1),g()),n&2){let t=e.$implicit;q("title",t.value),b(),te(" ",t.value," ")}}function Qf(n,e){n&1&&(v(0,"th",26),C(1,"Scope"),g())}function Yf(n,e){if(n&1&&(v(0,"td",28),C(1),g()),n&2){let t=e.$implicit;q("title",t.scope),b(),te(" ",t.scope," ")}}function Xf(n,e){n&1&&(jt(0,19),K(1,Qf,2,0,"th",15)(2,Yf,2,2,"td",18),Bt())}function Zf(n,e){n&1&&X(0,"tr",29)}function Jf(n,e){if(n&1&&X(0,"tr",30),n&2){let t=e.even;pt("even",t)}}function eh(n,e){n&1&&(v(0,"div",22),C(1,"Showing partial results"),g())}var vm=(()=>{let e=class e extends bt{constructor(i,r,o){super(),this.store=i,this.formBuilder=r,this.nifiCommon=o,this.initialSortColumn="key",this.initialSortDirection="asc",this.componentName$=this.store.select(gm).pipe(ye()),this.canClear$=this.store.select(ym).pipe(ye()),this.displayedColumns=["key","value"],this.dataSource=new tn,this.stateDescription="",this.totalEntries=0,this.filteredEntries=0,this.partialResults=!1,this.destroyRef=Se(Si),this.filterForm=this.formBuilder.group({filterTerm:""}),this.store.select(hm).pipe(ye(),ze()).subscribe(s=>{this.stateDescription=s.stateDescription;let a=[];if(s.localState){let u=this.processStateMap(s.localState,!1);a.push(...u)}if(s.clusterState){let u=this.processStateMap(s.clusterState,!0);a.push(...u)}this.dataSource.data=this.sortStateItems(a,{active:this.initialSortColumn,direction:this.initialSortDirection}),this.filteredEntries=a.length;let l=this.filterForm.get("filterTerm")?.value;l?.length>0&&this.applyFilter(l)}),this.store.select(Zi).pipe(ye(),ze()).subscribe(s=>{if(s.connectedToCluster)this.displayedColumns.includes("scope")||this.displayedColumns.splice(this.displayedColumns.length,0,"scope");else{let a=this.displayedColumns.indexOf("scope");a>-1&&this.displayedColumns.splice(a,1)}})}ngAfterViewInit(){this.filterForm.get("filterTerm")?.valueChanges.pipe(ni(500),ze(this.destroyRef)).subscribe(i=>{this.applyFilter(i)})}ngOnDestroy(){this.store.dispatch(Ei())}processStateMap(i,r){let o=i.state?i.state:[];return o.length!==i.totalEntryCount&&(this.partialResults=!0),this.totalEntries+=i.totalEntryCount,o.map(s=>({key:s.key,value:s.value,scope:r?"Cluster":s.clusterNodeAddress}))}applyFilter(i){this.dataSource.filter=i.trim().toLowerCase(),this.filteredEntries=this.dataSource.filteredData.length}sortData(i){this.dataSource.data=this.sortStateItems(this.dataSource.data,i)}sortStateItems(i,r){return i?i.slice().sort((o,s)=>{let a=r.direction==="asc",l=0;switch(r.active){case"key":l=this.nifiCommon.compareString(o.key,s.key);break;case"value":l=this.nifiCommon.compareString(o.value,s.value);break;case"scope":o.scope&&s.scope&&(l=this.nifiCommon.compareString(o.scope,s.scope));break}return l*(a?1:-1)}):[]}clearState(){this.store.dispatch(rr())}};e.\u0275fac=function(r){return new(r||e)(ee(ne),ee(St),ee($e))},e.\u0275cmp=Ae({type:e,selectors:[["component-state"]],inputs:{initialSortColumn:"initialSortColumn",initialSortDirection:"initialSortDirection"},standalone:!0,features:[it,Me],decls:41,vars:20,consts:[[1,"component-state-dialog"],["mat-dialog-title",""],[1,"dialog-content","flex","flex-col","justify-between","gap-y-5"],[1,"flex","flex-col"],[1,"accent-color","font-medium"],[1,"flex","flex-1","flex-col"],[1,"flex","flex-col","my-2",3,"formGroup"],[1,"flex","justify-between","items-center"],["subscriptSizing","dynamic"],["matInput","","type","text","formControlName","filterTerm",1,"small"],[1,"my-2","accent-color","leading-none","font-medium"],[1,"listing-table","flex-1","relative"],[1,"absolute","inset-0","overflow-y-auto","overflow-x-hidden"],["mat-table","","matSort","","matSortDisableClear","",3,"matSortChange","dataSource","matSortActive","matSortDirection"],["matColumnDef","key"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",3,"title",4,"matCellDef"],["matColumnDef","scope"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"even",4,"matRowDef","matRowDefColumns"],[1,"-mt-3"],["align","end"],["mat-button","","mat-dialog-close",""],[3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"title"],["mat-header-row",""],["mat-row",""]],template:function(r,o){if(r&1&&(v(0,"div",0)(1,"h2",1),C(2,"Component State"),g(),X(3,"error-banner"),v(4,"mat-dialog-content")(5,"div",2),K(6,Bf,5,1,"div",3),Re(7,"async"),v(8,"div",3)(9,"div"),C(10,"Description"),g(),v(11,"div",4),C(12),g()(),v(13,"div",5)(14,"div")(15,"form",6)(16,"div",7)(17,"mat-form-field",8)(18,"mat-label"),C(19,"Filter"),g(),X(20,"input",9),g(),K(21,zf,1,1),Re(22,"async"),g()(),v(23,"div",10),C(24),g()(),v(25,"div",11)(26,"div",12)(27,"table",13),oe("matSortChange",function(a){return o.sortData(a)}),jt(28,14),K(29,qf,2,0,"th",15)(30,Kf,2,1,"td",16),Bt(),jt(31,17),K(32,Gf,2,0,"th",15)(33,Wf,2,2,"td",18),Bt(),K(34,Xf,3,0,"ng-container",19)(35,Zf,1,0,"tr",20)(36,Jf,1,2,"tr",21),g()()()(),K(37,eh,2,0,"div",22),g()(),v(38,"mat-dialog-actions",23)(39,"button",24),C(40,"Close"),g()()()),r&2){let s,a;b(6),W(6,(s=He(7,14,o.componentName$))?6:-1,s),b(6),te(" ",o.stateDescription," "),b(3),q("formGroup",o.filterForm),b(6),W(21,(a=oi(18,jf,He(22,16,o.canClear$)))?21:-1,a),b(3),Ci(" Displaying ",o.filteredEntries," of ",o.totalEntries," "),b(3),q("dataSource",o.dataSource)("matSortActive",o.initialSortColumn)("matSortDirection",o.initialSortDirection),b(7),W(34,o.displayedColumns.includes("scope")?34:-1),b(),q("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),b(),q("matRowDefColumns",o.displayedColumns),b(),W(37,o.partialResults?37:-1)}},dependencies:[Qt,Ve,_t,qe,Ke,We,Ge,yr,ar,cr,dr,ur,lr,fr,mr,pr,hr,gr,vr,Kl,Gl,dt,rt,gt,Fn,ft,ht,yt,vt,Di,Ai,wi,Rn,On,Fi],styles:[".component-state-dialog[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block}.component-state-dialog[_ngcontent-%COMP%]   .listing-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-key[_ngcontent-%COMP%]{width:200px}"]});let n=e;return n})();var Sm=(()=>{let e=class e{constructor(i,r,o,s,a){this.actions$=i,this.store=r,this.componentStateService=o,this.dialog=s,this.errorHelper=a,this.getComponentStateAndOpenDialog$=O(()=>this.actions$.pipe(F(nr),I(l=>l.request),P(l=>Q(this.componentStateService.getComponentState({componentUri:l.componentUri}).pipe(I(u=>en({response:{componentState:u.componentState}})),z(u=>M(Te({error:this.errorHelper.getErrorString(u,`Failed to get the component state for ${l.componentName}.`)})))))))),this.loadComponentStateSuccess$=O(()=>this.actions$.pipe(F(en),I(l=>l.response),P(()=>M(To())))),this.openComponentStateDialog$=O(()=>this.actions$.pipe(F(To),me(()=>{this.dialog.open(vm,N(k({},Pn),{autoFocus:!1})).afterClosed().subscribe(()=>{this.store.dispatch(sr())})})),{dispatch:!1}),this.clearComponentState$=O(()=>this.actions$.pipe(F(rr),xe(()=>this.store.select(Ns).pipe(ye())),P(([,l])=>Q(this.componentStateService.clearComponentState({componentUri:l}).pipe(I(()=>xo()),z(u=>M(si({error:this.errorHelper.getErrorString(u,"Failed to clear the component state.")})))))))),this.reloadComponentState$=O(()=>this.actions$.pipe(F(xo),xe(()=>this.store.select(Ns).pipe(ye())),P(([,l])=>Q(this.componentStateService.getComponentState({componentUri:l}).pipe(I(u=>or({response:{componentState:u.componentState}})),z(u=>M(si({error:this.errorHelper.getErrorString(u,"Failed to reload the component state.")}))))))))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(ne),T(fm),T(Pe),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var Cm=(()=>{let e=class e{constructor(i,r){this.actions$=i,this.router=r,this.navigateToComponentDocumentation$=O(()=>this.actions$.pipe(F(Ln),I(o=>o.request),me(o=>{this.router.navigate(["/documentation"],{state:{backNavigation:o.backNavigation}})})),{dispatch:!1})}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(_i))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var _m=(()=>{let e=class e{constructor(i,r,o,s,a){this.actions$=i,this.clusterService=r,this.store=o,this.dialog=s,this.errorHelper=a,this.loadClusterSummary$=O(()=>this.actions$.pipe(F(Yi),xe(()=>this.store.select(Zi)),P(([,l])=>Q(this.clusterService.getClusterSummary().pipe(I(u=>{let c=u.clusterSummary,f=c.connectedToCluster;return l?l.connectedToCluster!==c.connectedToCluster&&this.store.dispatch(ui({connectedToCluster:f})):c.clustered&&!c.connectedToCluster&&this.store.dispatch(ui({connectedToCluster:f})),Qn({response:u})}),z(u=>M(Te({error:this.errorHelper.getErrorString(u,"Failed to load cluster summary")})))))))),this.startProcessGroupPolling$=O(()=>this.actions$.pipe(F(Pl),P(()=>Ot(3e4,Nt).pipe(Fe(this.actions$.pipe(F(Wn))))),P(()=>M(Yi())))),this.acknowledgeClusterConnectionChange$=O(()=>this.actions$.pipe(F(ui),Us(2e3),me(({connectedToCluster:l})=>{let u=l?"This node just joined the cluster. Any modifications to the data flow made here will replicate across the cluster.":"This node is currently not connected to the cluster. Any modifications to the data flow made here will not replicate across the cluster.",c=this.dialog.open(Hn,N(k({},Gt),{disableClose:!0,data:{title:"Cluster Connection",message:u}}));c.componentInstance.ok.pipe(Fe(c.afterClosed())).subscribe(()=>{l?this.store.dispatch(Xi({disconnectionAcknowledged:!1})):this.store.dispatch(Xi({disconnectionAcknowledged:!0}))})})),{dispatch:!1}),this.searchCluster$=O(()=>this.actions$.pipe(F(Nl),I(l=>l.request),xe(()=>this.store.select(Zi).pipe(ye(),fe(l=>l.connectedToCluster))),P(([l])=>Q(this.clusterService.searchCluster(l.q)).pipe(I(u=>Yn({response:u})),z(u=>M(Te({error:this.errorHelper.getErrorString(u,"Failed to search cluster summary")})))))))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(gc),T(ne),T(Pe),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var bm=(()=>{let e=class e{constructor(i,r,o){this.httpClient=i,this.client=r,this.nifiCommon=o}getAnalysis(i){let r={configurationAnalysis:{componentId:i.entity.id,properties:i.properties}};return this.httpClient.post(`${this.nifiCommon.stripProtocol(i.entity.uri)}/config/analysis`,r)}initiatePropertyVerification(i){return this.httpClient.post(`${this.nifiCommon.stripProtocol(i.uri)}/config/verification-requests`,i.request)}getPropertyVerificationRequest(i,r){return this.httpClient.get(`${this.nifiCommon.stripProtocol(r)}/config/verification-requests/${i}`)}deletePropertyVerificationRequest(i,r){return this.httpClient.delete(`${this.nifiCommon.stripProtocol(r)}/config/verification-requests/${i}`)}};e.API="../nifi-api",e.\u0275fac=function(r){return new(r||e)(T(Le),T(Yt),T($e))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function ih(n,e){n&1&&C(0," Complete ")}function nh(n,e){if(n&1&&C(0),n&2){let t=L();te(" ",t.state," ")}}function rh(n,e){if(n&1&&(v(0,"div",5),K(1,ih,1,0)(2,nh,1,1),g(),v(3,"div",6),X(4,"mat-progress-bar",7),v(5,"div",5),C(6),g()()),n&2){let t=e;b(),W(1,t.complete?1:2),b(3),q("value",t.percentCompleted),b(2),te("",t.percentCompleted,"%")}}function oh(n,e){if(n&1){let t=De();v(0,"button",8),oe("click",function(){let r=le(t),o=L();return ce(o.stop(r))}),C(1,"Stop"),g()}}var Em=(()=>{let e=class e{constructor(){this.verificationRequest$=M(null),this.stopVerification=new tt}stop(i){this.stopVerification.next(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["property-verification-progress"]],inputs:{verificationRequest$:"verificationRequest$"},outputs:{stopVerification:"stopVerification"},standalone:!0,features:[Me],decls:10,vars:6,consts:[["mat-dialog-title",""],[1,"change-version-progress"],[1,"flex","flex-col","gap-y-4"],["align","end"],["mat-button","","mat-dialog-close","","color","primary"],[1,"accent-color","font-medium"],[1,"w-full","flex","flex-col","items-center"],["mode","determinate",3,"value"],["mat-button","","mat-dialog-close","","color","primary",3,"click"]],template:function(r,o){if(r&1&&(v(0,"h2",0),C(1,"Verifying Properties"),g(),v(2,"div",1)(3,"mat-dialog-content")(4,"div",2),K(5,rh,7,3),Re(6,"async"),g()(),v(7,"mat-dialog-actions",3),K(8,oh,2,0,"button",4),Re(9,"async"),g()()),r&2){let s,a;b(5),W(5,(s=He(6,2,o.verificationRequest$))?5:-1,s),b(3),W(8,(a=He(9,4,o.verificationRequest$))?8:-1,a)}},dependencies:[nt,dt,Ve,We,qe,Ge,Ke,Mr]});let n=e;return n})();function sh(n,e){if(n&1){let t=De();v(0,"mat-checkbox",9),oe("mousedown",function(r){le(t);let o=L();return ce(o.preventDrag(r))})("change",function(){le(t);let r=L();return ce(r.setEmptyStringChanged())}),C(1,"Set empty string "),g()}}function ah(n,e){if(n&1){let t=De();v(0,"button",10),oe("mousedown",function(r){le(t);let o=L();return ce(o.preventDrag(r))})("click",function(){le(t);let r=L();return ce(r.cancelClicked())}),C(1," Close "),g()}}function lh(n,e){if(n&1){let t=De();v(0,"button",11),oe("mousedown",function(r){le(t);let o=L();return ce(o.preventDrag(r))})("click",function(){le(t);let r=L();return ce(r.cancelClicked())}),C(1," Cancel "),g(),v(2,"button",12),oe("mousedown",function(r){le(t);let o=L();return ce(o.preventDrag(r))})("click",function(){le(t);let r=L();return ce(r.okClicked())}),C(3," Ok "),g()}if(n&2){let t=L();b(2),q("disabled",!t.textEditorForm.dirty||t.textEditorForm.invalid)}}var Tm=(()=>{let e=class e{set item(i){this.textEditorForm.get("value")?.setValue(i.entry.value);let r=i.entry.value==="";this.textEditorForm.get("setEmptyString")?.setValue(r),this.setEmptyStringChanged(),this.itemSet=!0}constructor(i,r,o){this.formBuilder=i,this.viewContainerRef=r,this.renderer=o,this.readonly=!1,this.ok=new tt,this.cancel=new tt,this.blank=!1,this.itemSet=!1,this.textEditorForm=this.formBuilder.group({value:new ai(""),setEmptyString:new ai(!1)})}cancelClicked(){this.cancel.next()}okClicked(){let i=this.textEditorForm.get("value"),r=this.textEditorForm.get("setEmptyString");if(i&&r){let o=i.value;o===""?r.value?this.ok.next(""):this.ok.next(null):this.ok.next(o)}}setEmptyStringChanged(){let i=this.textEditorForm.get("setEmptyString");i&&(this.blank=i.value,i.value?(this.textEditorForm.get("value")?.setValue(""),this.textEditorForm.get("value")?.disable(),this.editor&&this.editor.setOption("readOnly","nocursor")):(this.textEditorForm.get("value")?.enable(),this.editor&&this.editor.setOption("readOnly",!1)))}resized(i){this.editor.setSize("100%",i.height-112)}preventDrag(i){i.stopPropagation()}codeMirrorLoaded(i){this.editor=i.codeMirror,this.editor.setSize("100%",108),this.readonly||(this.editor.focus(),this.editor.execCommand("selectAll")),this.textEditorForm.get("setEmptyString")?.value&&(this.textEditorForm.get("value")?.disable(),this.editor.setOption("readOnly","nocursor"))}getOptions(){return{readOnly:this.readonly,lineNumbers:!0,matchBrackets:!0,theme:"nifi",extraKeys:{Enter:()=>{this.textEditorForm.dirty&&this.textEditorForm.valid&&this.okClicked()}}}}};e.\u0275fac=function(r){return new(r||e)(ee(St),ee(ia),ee(ta))},e.\u0275cmp=Ae({type:e,selectors:[["text-editor"]],inputs:{item:"item",width:"width",readonly:"readonly"},outputs:{ok:"ok",cancel:"cancel"},standalone:!0,features:[Me],decls:10,vars:9,consts:[["cdkDrag","","resizable","",1,"text-editor","mat-elevation-z8","p-4","h-full",3,"resized"],["cdkTrapFocus","",1,"h-full",3,"formGroup","cdkTrapFocusAutoCapture"],[1,"flex","flex-col","gap-y-3","h-full"],[1,"flex","flex-col","gap-y-0.5","flex-1"],[1,"editor","flex-1"],["formControlName","value",3,"mousedown","codeMirrorLoaded","options"],["color","primary","formControlName","setEmptyString"],[1,"flex","justify-end","items-center","gap-x-2"],["mat-button","","type","button","color","primary"],["color","primary","formControlName","setEmptyString",3,"mousedown","change"],["mat-button","","type","button","color","primary",3,"mousedown","click"],["mat-button","","type","button",3,"mousedown","click"],["type","button","color","primary","mat-button","",3,"mousedown","click","disabled"]],template:function(r,o){r&1&&(v(0,"div",0),oe("resized",function(a){return o.resized(a)}),v(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ngx-codemirror",5),oe("mousedown",function(a){return o.preventDrag(a)})("codeMirrorLoaded",function(a){return o.codeMirrorLoaded(a)}),g()(),K(6,sh,2,0,"mat-checkbox",6),g(),v(7,"div",7),K(8,ah,2,0,"button",8)(9,lh,4,1),g()()()()),r&2&&(na("width",o.width,"px"),b(),q("formGroup",o.textEditorForm)("cdkTrapFocusAutoCapture",!o.readonly),b(3),pt("blank",o.blank),b(),q("options",o.getOptions()),b(),W(6,o.readonly?-1:6),b(2),W(8,o.readonly?8:9))},dependencies:[nt,Xl,tl,Jl,Zl,Ve,qn,rt,gt,ft,ht,yt,vt,Sr],styles:[".text-editor[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block;min-height:220px;min-width:245px;max-height:100vh;max-width:100vw;cursor:move}"]});let n=e;return n})();var ch=["trigger"],uh=["*"],mh=n=>({$implicit:n});function ph(n,e){if(n&1){let t=De();v(0,"div")(1,"button",19),oe("click",function(){le(t);let r=L();return ce(r.newEntryClicked())}),X(2,"i",20),g()()}}function dh(n,e){n&1&&(v(0,"th",21),C(1,"Name"),g())}function fh(n,e){if(n&1&&(v(0,"td",22)(1,"div",6)(2,"div",23),C(3),g()()()),n&2){let t=e.$implicit;b(2),q("title",t.entry.name),b(),te(" ",t.entry.name," ")}}function hh(n,e){n&1&&(v(0,"th",21),C(1,"Value"),g())}function gh(n,e){n&1&&(v(0,"div",25),C(1,"No value set"),g())}function yh(n,e){n&1&&ra(0)}function vh(n,e){n&1&&(v(0,"div",27),C(1,"Empty string set"),g())}function Sh(n,e){if(n&1&&X(0,"div",28),n&2){let t=L(4);q("tooltipComponentType",t.TextTip)}}function Ch(n,e){if(n&1&&(v(0,"div",6)(1,"div",23),C(2),g(),K(3,Sh,1,1,"div",28),g()),n&2){let t=e.$implicit,i=L(3);b(),q("title",t),b(),te(" ",t," "),b(),W(3,i.hasExtraWhitespace(t)?3:-1)}}function _h(n,e){if(n&1&&K(0,yh,1,0,"ng-container",26)(1,vh,2,0,"ng-template",null,2,po)(3,Ch,4,3,"ng-template",null,3,po),n&2){let t=Ui(2),i=Ui(4),r=L().$implicit,o=L();q("ngTemplateOutlet",o.isEmptyString(r.entry.value)?t:i)("ngTemplateOutletContext",oi(2,mh,r.entry.value))}}function bh(n,e){if(n&1){let t=De();v(0,"td",22)(1,"div",24,1),oe("click",function(r){let o=le(t).$implicit,s=Ui(2),a=L();return ce(a.openEditor(s,o,r))}),K(3,gh,2,0,"div",25)(4,_h,5,4),g()()}if(n&2){let t=e.$implicit,i=L();b(),q("id",i.formatId(t)),b(2),W(3,i.isNull(t.entry.value)?3:4)}}function Eh(n,e){n&1&&X(0,"th",21)}function Th(n,e){if(n&1&&(v(0,"button",30),X(1,"i",34),g()),n&2){L();let t=Ui(4);q("matMenuTriggerFor",t)}}function xh(n,e){if(n&1){let t=De();v(0,"td",22)(1,"div",29),K(2,Th,2,1,"button",30),v(3,"mat-menu",31,4)(5,"button",32),oe("click",function(){let r=le(t).$implicit,o=L();return ce(o.deleteProperty(r))}),X(6,"i",33),C(7," Delete "),g()()()()}if(n&2){let t=L();b(2),W(2,t.isDisabled?-1:2)}}function wh(n,e){n&1&&X(0,"tr",35)}function Ah(n,e){if(n&1){let t=De();v(0,"tr",36),oe("click",function(){let r=le(t).$implicit,o=L();return ce(o.select(r))}),g()}if(n&2){let t=e.$implicit,i=e.even,r=L();pt("selected",r.isSelected(t))("even",i)}}function Dh(n,e){if(n&1){let t=De();v(0,"text-editor",37),oe("ok",function(r){le(t);let o=L();return ce(o.saveValue(o.editorItem,r))})("cancel",function(){le(t);let r=L();return ce(r.closeEditor())}),g()}if(n&2){let t=L();q("item",t.editorItem)("width",t.editorWidth)("readonly",t.isDisabled)}}var xm=(()=>{let e=class e{constructor(i,r){this.changeDetector=i,this.nifiCommon=r,this.reportChangesOnly=!1,this.destroyRef=Se(Si),this.itemLookup=new Map,this.displayedColumns=["name","value","actions"],this.dataSource=new tn,this.isDisabled=!1,this.isTouched=!1,this.editorOpen=!1,this.editorTrigger=null,this.editorWidth=0,this.editorOffsetX=0,this.editorOffsetY=0,this.originPos={originX:"center",originY:"center"},this.editorOverlayPos={overlayX:"center",overlayY:"center"},this.editorPositions=[],this.TextTip=qt}ngAfterViewInit(){this.initFilter(),this.valueTriggers.changes.pipe(ze(this.destroyRef)).subscribe(()=>{let i=this.dataSource.data.find(r=>r.triggerEdit);if(i){let r=this.valueTriggers.find(o=>this.formatId(i)==o.elementRef.nativeElement.getAttribute("id"));r&&(r.elementRef.nativeElement.scrollIntoView({block:"center",behavior:"instant"}),window.setTimeout(function(){r.elementRef.nativeElement.click()},0)),i.triggerEdit=!1}})}initFilter(){this.dataSource.filterPredicate=i=>this.isVisible(i),this.dataSource.filter=" "}isVisible(i){return!i.deleted}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.isDisabled=i}writeValue(i){this.itemLookup.clear();let r=0,o=[];i&&(o=i.map(s=>{let a={entry:s,id:r++,triggerEdit:!1,deleted:!1,added:!1,dirty:!1};return this.itemLookup.set(s.name,a),a})),this.setItems(o)}setItems(i){this.dataSource=new tn(i),this.initFilter()}newEntryClicked(){let i=this.dataSource.data.filter(r=>!r.deleted).map(r=>r.entry.name);this.createNew(i).pipe(Oe(1)).subscribe(r=>{let o=this.dataSource.data,s=o.findIndex(a=>a.entry.name==r.name);if(s>-1){let a=o[s],l=N(k({},a),{entry:r,triggerEdit:!0,deleted:!1,added:!0,dirty:!0});this.itemLookup.set(r.name,l),o[s]=l}else{let a=o.length,l={entry:r,id:a,triggerEdit:!0,deleted:!1,added:!0,dirty:!0};this.itemLookup.set(r.name,l),this.setItems([...o,l])}this.handleChanged()})}formatId(i){return"entry-"+i.id}isNull(i){return i==null}isEmptyString(i){return i==""}hasExtraWhitespace(i){return this.nifiCommon.hasLeadTrailWhitespace(i)}openEditor(i,r,o){if(o.target){let a=o.target.closest("td");if(a){let{width:l}=a.getBoundingClientRect();this.editorPositions.pop(),this.editorItem=r,this.editorTrigger=i,this.editorOpen=!0,this.editorWidth=l+100,this.editorOffsetX=8,this.editorOffsetY=80,this.editorPositions.push(new qa(this.originPos,this.editorOverlayPos,this.editorOffsetX,this.editorOffsetY))}}}deleteProperty(i){i.deleted||(i.entry.value=null,i.deleted=!0,i.dirty=!0,this.handleChanged())}saveValue(i,r){i.entry.value!=r&&(i.entry.value=r,i.dirty=!0,this.handleChanged()),this.closeEditor()}handleChanged(){this.dataSource._updateChangeSubscription(),this.changeDetector.markForCheck(),this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.serializeEntries())}serializeEntries(){let i=this.dataSource.data;return this.reportChangesOnly?i.filter(r=>r.dirty).filter(r=>!(r.added&&r.deleted)).map(r=>r.entry):i.filter(r=>!r.deleted).map(r=>r.entry)}closeEditor(){this.editorOpen=!1}select(i){this.selectedItem=i}isSelected(i){return this.selectedItem?i.entry.name==this.selectedItem.entry.name:!1}};e.\u0275fac=function(r){return new(r||e)(ee(fa),ee($e))},e.\u0275cmp=Ae({type:e,selectors:[["map-table"]],viewQuery:function(r,o){if(r&1&&aa(ch,5),r&2){let s;la(s=ca())&&(o.valueTriggers=s)}},inputs:{createNew:"createNew",reportChangesOnly:"reportChangesOnly"},standalone:!0,features:[da([{provide:sl,useExisting:Qs(()=>e),multi:!0}]),Me],ngContentSelectors:uh,decls:21,vars:10,consts:[["mapTable",""],["trigger","cdkOverlayOrigin"],["blank",""],["nonBlank",""],["actionMenu","matMenu"],[1,"map-table","flex","flex-col","h-full","gap-y-3"],[1,"flex","justify-between","items-center"],[1,"font-bold","flex-1"],[1,"listing-table","flex-1","relative"],[1,"absolute","inset-0","overflow-y-auto","overflow-x-hidden"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"selected","even","click",4,"matRowDef","matRowDefColumns"],["cdkConnectedOverlay","",3,"detach","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayBackdropClass","cdkConnectedOverlayOpen"],["mat-icon-button","","color","primary","type","button",3,"click"],[1,"fa","fa-plus"],["mat-header-cell",""],["mat-cell",""],[1,"whitespace-nowrap","overflow-hidden","text-ellipsis","leading-normal",3,"title"],["cdkOverlayOrigin","",1,"pointer",3,"click","id"],[1,"unset","surface-color"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"empty","surface-color"],["nifiTooltip","","tooltipInputData","The specified value contains leading and/or trailing whitespace character(s). This could produce unexpected results if it was not intentional.",1,"fa","fa-info","primary-color",3,"tooltipComponentType"],[1,"flex","items-center","justify-end","gap-x-2"],["mat-icon-button","","type","button",1,"h-16","w-16","flex","items-center","justify-center","icon","global-menu",3,"matMenuTriggerFor"],["xPosition","before"],["mat-menu-item","",3,"click"],[1,"fa","fa-trash","primary-color","mr-2"],[1,"fa","fa-ellipsis-v"],["mat-header-row",""],["mat-row","",3,"click"],[3,"ok","cancel","item","width","readonly"]],template:function(r,o){if(r&1){let s=De();oa(),v(0,"div",5)(1,"div",6)(2,"div",7),sa(3),g(),K(4,ph,3,0,"div"),g(),v(5,"div",8)(6,"div",9)(7,"table",10,0),jt(9,11),K(10,dh,2,0,"th",12)(11,fh,4,2,"td",13),Bt(),jt(12,14),K(13,hh,2,0,"th",12)(14,bh,5,2,"td",13),Bt(),jt(15,15),K(16,Eh,1,0,"th",12)(17,xh,8,1,"td",13),Bt(),K(18,wh,1,0,"tr",16)(19,Ah,1,4,"tr",17),g(),K(20,Dh,1,3,"ng-template",18),oe("detach",function(){return le(s),ce(o.closeEditor())}),g()()()}r&2&&(b(4),W(4,o.isDisabled?-1:4),b(3),q("dataSource",o.dataSource),b(11),q("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),b(),q("matRowDefColumns",o.displayedColumns),b(),q("cdkConnectedOverlayOrigin",o.editorTrigger)("cdkConnectedOverlayPositions",o.editorPositions)("cdkConnectedOverlayHasBackdrop",!0)("cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop")("cdkConnectedOverlayOpen",o.editorOpen))},dependencies:[nt,ya,Ga,Ka,pr,lr,ur,mr,Wt,ar,cr,Kt,El,bl,_l,gr,hr,fr,dr,Tm]});let n=e;return n})();var wm=(()=>{let e=class e extends bt{constructor(i,r){super(),this.formBuilder=i,this.data=r,this.verify=new tt,this.TextTip=qt;let o=r.attributes||[];this.referencedAttributesForm=this.formBuilder.group({attributes:new ai(o)})}verifyClicked(){this.verify.next(this.referencedAttributesForm.value)}clearAttributesClicked(){this.referencedAttributesForm.reset()}isEmpty(){return(this.referencedAttributesForm.get("attributes")?.value||[]).length===0}};e.\u0275fac=function(r){return new(r||e)(ee(St),ee(ki))},e.\u0275cmp=Ae({type:e,selectors:[["referenced-attributes-dialog"]],inputs:{createNew:"createNew"},outputs:{verify:"verify"},standalone:!0,features:[it,Me],decls:17,vars:5,consts:[["mat-dialog-title",""],[1,"referenced-attributes-form",3,"formGroup"],[1,"dialog-content","max-h-96"],["formControlName","attributes",3,"createNew","reportChangesOnly"],[1,"flex","flex-row","justify-between","items-center"],["nifiTooltip","","tooltipInputData","Supply attribute values that should be considered when performing property verification.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["mat-icon-button","","color","primary","type","button",3,"click","disabled"],[1,"fa","fa-eraser"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close","","cdkFocusInitial","","color","primary",3,"click"]],template:function(r,o){r&1&&(v(0,"h2",0),C(1,"Referenced Attributes"),g(),v(2,"form",1)(3,"mat-dialog-content")(4,"div",2)(5,"map-table",3)(6,"div",4)(7,"div"),C(8," Enter Attribute Values "),X(9,"i",5),g(),v(10,"button",6),oe("click",function(){return o.clearAttributesClicked()}),X(11,"i",7),g()()()()(),v(12,"mat-dialog-actions",8)(13,"button",9),C(14,"Cancel"),g(),v(15,"button",10),oe("click",function(){return o.verifyClicked()}),C(16,"Verify"),g()()()),r&2&&(b(2),q("formGroup",o.referencedAttributesForm),b(3),q("createNew",o.createNew)("reportChangesOnly",!1),b(4),q("tooltipComponentType",o.TextTip),b(),q("disabled",o.isEmpty()))},dependencies:[nt,Ke,rt,gt,ft,ht,yt,vt,Ge,We,Ve,qe,xm,Kt,Wt]});let n=e;return n})();function kh(n,e){if(n&1&&(v(0,"mat-error"),C(1),g()),n&2){let t=L();b(),Ce(t.getNameErrorMessage())}}var Am=(()=>{let e=class e extends bt{constructor(i,r){super(),this.formBuilder=i,this.data=r,this.newEntry=new tt,this.name=new ai(null,[al.required,this.existingEntryValidator(this.data.existingEntries)]),this.newEntryForm=i.group({name:this.name})}existingEntryValidator(i){return r=>{let o=r.value;return o===""?null:i.includes(o)?{existingEntry:!0}:null}}getNameErrorMessage(){return this.name?this.name.hasError("required")?"Name is required.":this.name.hasError("existingEntry")?"Name already exists.":"":""}addClicked(){this.newEntry.next(this.name.value)}};e.\u0275fac=function(r){return new(r||e)(ee(St),ee(ki))},e.\u0275cmp=Ae({type:e,selectors:[["new-map-table-entry-dialog"]],outputs:{newEntry:"newEntry"},standalone:!0,features:[it,Me],decls:15,vars:4,consts:[["mat-dialog-title",""],[1,"new-entry-form",3,"formGroup"],[1,"mb-2"],["matInput","","formControlName","name","type","text"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","color","primary",3,"click","disabled"]],template:function(r,o){r&1&&(v(0,"h2",0),C(1),g(),v(2,"form",1)(3,"mat-dialog-content")(4,"div",2)(5,"mat-form-field")(6,"mat-label"),C(7,"Name"),g(),X(8,"input",3),K(9,kh,2,1,"mat-error"),g()()(),v(10,"mat-dialog-actions",4)(11,"button",5),C(12,"Cancel"),g(),v(13,"button",6),oe("click",function(){return o.addClicked()}),C(14," Ok "),g()()()),r&2&&(b(),te("Add ",o.data.entryTypeLabel||"Entry",""),b(),q("formGroup",o.newEntryForm),b(7),W(9,o.name.invalid?9:-1),b(4),q("disabled",!o.newEntryForm.dirty||o.newEntryForm.invalid))},dependencies:[nt,Ve,We,qe,Ge,Ke,cl,Ai,On,wi,rt,gt,Fn,ft,ht,yt,vt],styles:[`.new-entry-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px;--mdc-filled-button-container-height: 32px;--mdc-outlined-button-container-height: 32px;--mdc-protected-button-container-height: 32px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block}.new-entry-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}
















`]});let n=e;return n})();var Dm=(()=>{let e=class e{constructor(i){this.dialog=i}createNewEntry(i){return r=>{let o=this.dialog.open(Am,N(k({},In),{data:{existingEntries:r,entryTypeLabel:i}}));return o.componentInstance.newEntry.pipe(Fe(o.afterClosed()),P(s=>(o.close(),M({name:s,value:null}))))}}};e.\u0275fac=function(r){return new(r||e)(T(Pe))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var km=(()=>{let e=class e{constructor(i,r,o,s,a,l,u){this.actions$=i,this.store=r,this.dialog=o,this.errorHelper=s,this.propertyVerificationService=a,this.propertyTableHelperService=l,this.mapTableHelperService=u,this.verifyProperties$=O(()=>this.actions$.pipe(F(ac),I(c=>c.request),P(c=>Q(this.propertyVerificationService.getAnalysis(c)).pipe(I(f=>Ni({response:{requestContext:c,configurationAnalysis:f.configurationAnalysis}})),z(f=>M(Te({error:this.errorHelper.getErrorString(f)}))))))),this.getConfigurationAnalysisSuccess_noExtraVerification$=O(()=>this.actions$.pipe(F(Ni),I(c=>c.response),fe(c=>!c.configurationAnalysis.supportsVerification),P(c=>M(Ri({response:c}))))),this.getConfigurationAnalysisSuccess_extraVerification$=O(()=>this.actions$.pipe(F(Ni),I(c=>c.response),fe(c=>c.configurationAnalysis.supportsVerification),xe(()=>this.store.select(cc)),me(([c,f])=>{let S=[];f&&(S=Object.entries(f).map(([h,p])=>({name:h,value:p})));let x=this.dialog.open(wm,N(k({},Gt),{data:{attributes:S}}));x.componentInstance.createNew=this.mapTableHelperService.createNewEntry("Attribute"),x.componentInstance.verify.pipe(Fe(x.afterClosed())).subscribe(h=>{let p=h.attributes||[],m={};p.forEach(y=>{m[y.name]=y.value});let d=N(k({},c),{configurationAnalysis:N(k({},c.configurationAnalysis),{referencedAttributes:m})});this.store.dispatch(Ri({response:d}))})})),{dispatch:!1}),this.initiatePropertyVerification$=O(()=>this.actions$.pipe(F(Ri),I(c=>c.response),P(c=>(this.store.dispatch(Mo()),Q(this.propertyVerificationService.initiatePropertyVerification({request:{request:{properties:c.configurationAnalysis.properties,componentId:c.configurationAnalysis.componentId,attributes:c.configurationAnalysis.referencedAttributes}},uri:c.requestContext.entity.uri}).pipe(I(f=>ln({response:f})),z(f=>M(Te({error:this.errorHelper.getErrorString(f)}))))))))),this.openPropertyVerificationProgressDialog$=O(()=>this.actions$.pipe(F(Mo),me(()=>{let c=this.dialog.open(Em,k({},In)),f=this.store.select(kr).pipe(ye());c.componentInstance.verificationRequest$=f,f.pipe(Fe(c.afterClosed()),ye(),fe(S=>S.complete)).subscribe(S=>{S.failureReason&&this.store.dispatch(Te({error:S.failureReason})),c.close()}),c.componentInstance.stopVerification.pipe(Oe(1)).subscribe(()=>{this.store.dispatch(Oi())})})),{dispatch:!1}),this.verifyPropertiesSuccess$=O(()=>this.actions$.pipe(F(ln),I(c=>c.response),fe(c=>!c.request.complete),P(()=>M(Do())))),this.startPollingPropertyVerification$=O(()=>this.actions$.pipe(F(Do),P(()=>Ot(2e3,Nt).pipe(Fe(this.actions$.pipe(F(Oi))))),P(()=>M(ko())))),this.pollPropertyVerification$=O(()=>this.actions$.pipe(F(ko),xe(()=>[this.store.select(Io).pipe(ye()),this.store.select(kr).pipe(ye())]),P(([,c,f])=>Q(this.propertyVerificationService.getPropertyVerificationRequest(f.requestId,c.entity.uri).pipe(I(S=>an({response:S})),z(S=>(this.store.dispatch(Oi()),M(Te({error:this.errorHelper.getErrorString(S)}))))))))),this.pollPropertyVerificationSuccess$=O(()=>this.actions$.pipe(F(an),I(c=>c.response),fe(c=>c.request.complete),P(()=>M(Oi())))),this.stopPollingPropertyVerification$=O(()=>this.actions$.pipe(F(Oi),xe(()=>[this.store.select(Io).pipe(ye()),this.store.select(kr).pipe(ye())]),P(([,c,f])=>Q(this.propertyVerificationService.deletePropertyVerificationRequest(f.requestId,c.entity.uri)).pipe(I(()=>Dr()),z(S=>M(Te({error:this.errorHelper.getErrorString(S)})))))))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(ne),T(Pe),T(ge),T(bm),T(sc),T(Dm))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var Mm=(n,e)=>{let t=Se(xc);return t.set(!0,n.url),e(n).pipe(zs(()=>t.set(!1,n.url)))};var Im=(()=>{let e=class e{constructor(i,r,o){this.actions$=i,this.authService=r,this.errorHelper=o,this.loadLoginConfiguration$=O(()=>this.actions$.pipe(F(Pr),P(()=>Q(this.authService.getLoginConfiguration().pipe(I(s=>Jt({response:s})),z(s=>M(Te({error:this.errorHelper.getErrorString(s,"Failed to load Login Configuration.")}))))))))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(Ut),T(ge))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var Pm=(()=>{let e=class e{constructor(i){this.httpClient=i}getBannerText(){return this.httpClient.get(`${e.API}/flow/banners`)}};e.API="../nifi-api",e.\u0275fac=function(r){return new(r||e)(T(Le))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Fm=(()=>{let e=class e{constructor(i,r,o){this.actions$=i,this.bannerTextService=r,this.store=o,this.loadBannerText$=O(()=>this.actions$.pipe(F(Xn),xe(()=>this.store.select($l)),fe(([,s])=>s===null),P(()=>Q(this.bannerTextService.getBannerText().pipe(I(s=>Zn({response:{bannerText:s.banners}})))))))}};e.\u0275fac=function(r){return new(r||e)(T(ve),T(Pm),T(ne))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let n=e;return n})();var Nm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ht({type:e,bootstrap:[Mc]}),e.\u0275inj=Rt({providers:[{provide:ul,useValue:{appearance:"outline"}},Sa(Ca([Wu,Mm,Yu]))],imports:[Tn,Dc,su,ba,_a.withOptions({cookieName:"__Secure-Request-Token",headerName:"Request-Token"}),Ha.forRoot(Ku),el.forRoot({routerState:1,navigationActionTiming:Za.PostActivation}),ml.forRoot(hl,Gu,Qu,Ju,Fm,dm,Im,sm,lm,pm,Sm,Cm,_m,km),ku.instrument({maxAge:25,logOnly:Mu.production,autoPause:!0}),ol,il,_t,fl,Wa]});let n=e;return n})();var nT=Ft(Hm()),rT=Ft(Vm()),oT=Ft(Um()),sT=Ft(Os()),aT=Ft(Wm()),lT=Ft(Xm()),cT=Ft(ep()),uT=Ft(np());Ta().bootstrapModule(Nm).catch(n=>console.error(n));
